v {xschem version=3.4.7 file_version=1.2}
G {}
K {}
V {}
S {}
E {}
N 1340 -1180 1340 -1110 {lab=vdd}
N 710 -1080 1300 -1080 {lab=i_ref}
N 670 -1180 670 -1110 {lab=vdd}
N 670 -1180 1340 -1180 {lab=vdd}
N 2060 -1180 2060 -1110 {lab=vdd}
N 1340 -1180 1920 -1180 {lab=vdd}
N 1470 -1080 1880 -1080 {lab=i_ref}
N 1470 -1130 1470 -1080 {lab=i_ref}
N 1270 -1130 1470 -1130 {lab=i_ref}
N 1270 -1130 1270 -1080 {lab=i_ref}
N 1140 -850 1140 -770 {lab=#net1}
N 1140 -850 1340 -850 {lab=#net1}
N 1340 -940 1340 -850 {lab=#net1}
N 1340 -850 1550 -850 {lab=#net1}
N 1550 -840 1550 -770 {lab=#net1}
N 1550 -850 1550 -840 {lab=#net1}
N 1140 -710 1140 -460 {lab=#net2}
N 1550 -710 1550 -460 {lab=cs}
N 1180 -430 1510 -430 {lab=#net2}
N 1210 -480 1210 -430 {lab=#net2}
N 1140 -480 1210 -480 {lab=#net2}
N 1140 -400 1140 -310 {lab=vss}
N 1550 -400 1550 -310 {lab=vss}
N 1140 -310 1550 -310 {lab=vss}
N 2060 -940 2060 -630 {lab=cd}
N 1550 -310 1920 -310 {lab=vss}
N 1480 -480 1480 -430 {lab=#net2}
N 1480 -480 1620 -480 {lab=#net2}
N 1620 -480 1620 -430 {lab=#net2}
N 1620 -430 2190 -430 {lab=#net2}
N 2500 -400 2500 -320 {lab=vss}
N 2060 -310 2370 -310 {lab=vss}
N 2500 -320 2500 -310 {lab=vss}
N 2500 -740 2500 -460 {lab=out}
N 2060 -1180 2370 -1180 {lab=vdd}
N 2500 -1070 2500 -800 {lab=vdd}
N 1000 -740 1100 -740 {lab=in_n}
N 1590 -740 1680 -740 {lab=in_p}
N 1930 -640 1960 -640 {lab=#net3}
N 2020 -640 2060 -640 {lab=cd}
N 1840 -640 1870 -640 {lab=cs}
N 740 -1080 740 -1010 {lab=i_ref}
N 2500 -630 2580 -630 {lab=out}
N 1310 -1500 1310 -1460 {lab=GND}
N 1220 -1500 1220 -1460 {lab=vss}
N 1310 -1600 1310 -1560 {lab=vss}
N 1220 -1600 1220 -1560 {lab=vdd}
N 1330 -1210 1330 -1180 {lab=vdd}
N 1390 -310 1390 -290 {lab=vss}
N 2060 -540 2060 -310 {lab=vss}
N 2060 -630 2060 -600 {lab=cd}
N 1840 -640 1840 -570 {lab=cs}
N 1120 -430 1140 -430 {lab=vss}
N 1120 -430 1120 -380 {lab=vss}
N 1120 -380 1140 -380 {lab=vss}
N 1550 -430 1570 -430 {lab=vss}
N 1570 -430 1570 -380 {lab=vss}
N 1550 -380 1570 -380 {lab=vss}
N 2060 -570 2080 -570 {lab=vss}
N 2080 -570 2080 -520 {lab=vss}
N 2060 -520 2080 -520 {lab=vss}
N 2500 -430 2520 -430 {lab=vss}
N 2520 -430 2520 -380 {lab=vss}
N 2500 -380 2520 -380 {lab=vss}
N 2500 -770 2520 -770 {lab=vss}
N 2060 -1080 2080 -1080 {lab=vdd}
N 2080 -1130 2080 -1080 {lab=vdd}
N 2060 -1130 2080 -1130 {lab=vdd}
N 1340 -1080 1360 -1080 {lab=vdd}
N 1360 -1120 1360 -1080 {lab=vdd}
N 1340 -1120 1360 -1120 {lab=vdd}
N 650 -1080 670 -1080 {lab=vdd}
N 650 -1120 650 -1080 {lab=vdd}
N 650 -1120 670 -1120 {lab=vdd}
N 1140 -740 1170 -740 {lab=vdd}
N 1510 -740 1550 -740 {lab=vdd}
N 1170 -740 1510 -740 {lab=vdd}
N 1920 -1180 2060 -1180 {lab=vdd}
N 1880 -1080 2020 -1080 {lab=i_ref}
N 2370 -1180 2490 -1180 {lab=vdd}
N 2490 -1180 2500 -1180 {lab=vdd}
N 2190 -430 2460 -430 {lab=#net2}
N 2370 -310 2500 -310 {lab=vss}
N 1920 -310 2060 -310 {lab=vss}
N 1880 -570 2020 -570 {lab=cs}
N 1080 -1500 1080 -1460 {lab=vss}
N 1080 -1680 1080 -1640 {lab=in_p}
N 1080 -1640 1080 -1560 {lab=in_p}
N 670 -1050 670 -1000 {lab=i_ref}
N 1340 -1050 1340 -1020 {lab=#net1}
N 2060 -1050 2060 -1000 {lab=cd}
N 2080 -1080 2090 -1080 {lab=vdd}
N 2500 -1180 2500 -1070 {lab=vdd}
N 670 -1000 670 -940 {lab=i_ref}
N 670 -1010 740 -1010 {lab=i_ref}
N 1340 -1020 1340 -940 {lab=#net1}
N 2060 -1000 2060 -940 {lab=cd}
N 1840 -570 1880 -570 {lab=cs}
N 1550 -570 1840 -570 {lab=cs}
N 2060 -770 2330 -770 {lab=cd}
N 690 -1610 750 -1610 {lab=in_p}
N 690 -1580 750 -1580 {lab=in_n}
N 690 -1550 750 -1550 {lab=vdd}
N 690 -1520 750 -1520 {lab=vss}
N 1390 -1500 1390 -1460 {lab=GND}
N 1390 -1600 1390 -1560 {lab=i_ref}
N 690 -1490 750 -1490 {lab=i_ref}
N 2780 -630 2780 -520 {lab=out}
N 2580 -630 2780 -630 {lab=out}
N 2780 -460 2780 -310 {lab=vss}
N 2500 -310 2780 -310 {lab=vss}
N 960 -1500 960 -1460 {lab=vss}
N 960 -1680 960 -1640 {lab=in_n}
N 960 -1640 960 -1560 {lab=in_n}
N 2330 -770 2390 -770 {lab=cd}
N 2390 -770 2460 -770 {lab=cd}
C {symbols/pfet_03v3.sym} 1320 -1080 0 0 {name=MP_TAIL
L=2u
W=25u
nf=5
m=8
ad="'int((nf+1)/2) * W/nf * 0.18u'"
pd="'2*int((nf+1)/2) * (W/nf + 0.18u)'"
as="'int((nf+2)/2) * W/nf * 0.18u'"
ps="'2*int((nf+2)/2) * (W/nf + 0.18u)'"
nrd="'0.18u / W'" nrs="'0.18u / W'"
sa=0 sb=0 sd=0
model=pfet_03v3
spiceprefix=X
}
C {symbols/pfet_03v3.sym} 1120 -740 0 0 {name=MP_DIFF_L
L=2u
W=10u
nf=10
m=10
ad="'int((nf+1)/2) * W/nf * 0.18u'"
pd="'2*int((nf+1)/2) * (W/nf + 0.18u)'"
as="'int((nf+2)/2) * W/nf * 0.18u'"
ps="'2*int((nf+2)/2) * (W/nf + 0.18u)'"
nrd="'0.18u / W'" nrs="'0.18u / W'"
sa=0 sb=0 sd=0
model=pfet_03v3
spiceprefix=X
}
C {symbols/pfet_03v3.sym} 1570 -740 0 1 {name=MP_DIFF_R
L=2u
W=10u
nf=10
m=10
ad="'int((nf+1)/2) * W/nf * 0.18u'"
pd="'2*int((nf+1)/2) * (W/nf + 0.18u)'"
as="'int((nf+2)/2) * W/nf * 0.18u'"
ps="'2*int((nf+2)/2) * (W/nf + 0.18u)'"
nrd="'0.18u / W'" nrs="'0.18u / W'"
sa=0 sb=0 sd=0
model=pfet_03v3
spiceprefix=X
}
C {symbols/pfet_03v3.sym} 2040 -1080 0 0 {name=MP_CS_LOAD
L=2u
W=25u
nf=5
m=30
ad="'int((nf+1)/2) * W/nf * 0.18u'"
pd="'2*int((nf+1)/2) * (W/nf + 0.18u)'"
as="'int((nf+2)/2) * W/nf * 0.18u'"
ps="'2*int((nf+2)/2) * (W/nf + 0.18u)'"
nrd="'0.18u / W'" nrs="'0.18u / W'"
sa=0 sb=0 sd=0
model=pfet_03v3
spiceprefix=X
}
C {symbols/pfet_03v3.sym} 690 -1080 0 1 {name=MP_MIRROR
L=2u
W=25u
nf=5
m=1
ad="'int((nf+1)/2) * W/nf * 0.18u'"
pd="'2*int((nf+1)/2) * (W/nf + 0.18u)'"
as="'int((nf+2)/2) * W/nf * 0.18u'"
ps="'2*int((nf+2)/2) * (W/nf + 0.18u)'"
nrd="'0.18u / W'" nrs="'0.18u / W'"
sa=0 sb=0 sd=0
model=pfet_03v3
spiceprefix=X
}
C {symbols/nfet_03v3.sym} 1530 -430 0 0 {name=MN_LOAD_R
L=2u
W=17u
nf=1
m=1
ad="'int((nf+1)/2) * W/nf * 0.18u'"
pd="'2*int((nf+1)/2) * (W/nf + 0.18u)'"
as="'int((nf+2)/2) * W/nf * 0.18u'"
ps="'2*int((nf+2)/2) * (W/nf + 0.18u)'"
nrd="'0.18u / W'" nrs="'0.18u / W'"
sa=0 sb=0 sd=0
model=nfet_03v3
spiceprefix=X
}
C {symbols/nfet_03v3.sym} 1160 -430 0 1 {name=MN_LOAD_L
L=2u
W=17u
nf=1
m=1
ad="'int((nf+1)/2) * W/nf * 0.18u'"
pd="'2*int((nf+1)/2) * (W/nf + 0.18u)'"
as="'int((nf+2)/2) * W/nf * 0.18u'"
ps="'2*int((nf+2)/2) * (W/nf + 0.18u)'"
nrd="'0.18u / W'" nrs="'0.18u / W'"
sa=0 sb=0 sd=0
model=nfet_03v3
spiceprefix=X
}
C {symbols/nfet_03v3.sym} 2040 -570 0 0 {name=MN_CS
L=2u
W=10u
nf=10
m=13
ad="'int((nf+1)/2) * W/nf * 0.18u'"
pd="'2*int((nf+1)/2) * (W/nf + 0.18u)'"
as="'int((nf+2)/2) * W/nf * 0.18u'"
ps="'2*int((nf+2)/2) * (W/nf + 0.18u)'"
nrd="'0.18u / W'" nrs="'0.18u / W'"
sa=0 sb=0 sd=0
model=nfet_03v3
spiceprefix=X
}
C {symbols/nfet_03v3.sym} 2480 -770 0 0 {name=MN_CD
L=2u
W=10u
nf=10
m=26
ad="'int((nf+1)/2) * W/nf * 0.18u'"
pd="'2*int((nf+1)/2) * (W/nf + 0.18u)'"
as="'int((nf+2)/2) * W/nf * 0.18u'"
ps="'2*int((nf+2)/2) * (W/nf + 0.18u)'"
nrd="'0.18u / W'" nrs="'0.18u / W'"
sa=0 sb=0 sd=0
model=nfet_03v3
spiceprefix=X
}
C {symbols/nfet_03v3.sym} 2480 -430 0 0 {name=MN_CD_LOAD
L=2u
W=15u
nf=1
m=8
ad="'int((nf+1)/2) * W/nf * 0.18u'"
pd="'2*int((nf+1)/2) * (W/nf + 0.18u)'"
as="'int((nf+2)/2) * W/nf * 0.18u'"
ps="'2*int((nf+2)/2) * (W/nf + 0.18u)'"
nrd="'0.18u / W'" nrs="'0.18u / W'"
sa=0 sb=0 sd=0
model=nfet_03v3
spiceprefix=X
}
C {vsource.sym} 1220 -1530 0 0 {name=V1 value=3.3 savecurrent=false}
C {capa.sym} 1990 -640 3 0 {name=C1
m=1
value=400fF
footprint=1206
device="ceramic capacitor"}
C {res.sym} 1900 -640 3 0 {name=R2
value=450
footprint=1206
device=resistor
m=1}
C {vsource.sym} 1310 -1530 0 0 {name=V2 value=0 savecurrent=false}
C {gnd.sym} 1310 -1460 0 0 {name=l1 lab=GND}
C {lab_pin.sym} 1220 -1600 3 1 {name=p2 sig_type=std_logic lab=vdd}
C {lab_pin.sym} 1220 -1460 1 1 {name=p4 sig_type=std_logic lab=vss}
C {lab_pin.sym} 1330 -1210 3 1 {name=p5 sig_type=std_logic lab=vdd}
C {lab_pin.sym} 1390 -290 1 1 {name=p6 sig_type=std_logic lab=vss}
C {lab_pin.sym} 2520 -770 0 1 {name=p7 sig_type=std_logic lab=vss}
C {lab_pin.sym} 1000 -740 2 1 {name=p9 sig_type=std_logic lab=in_n
}
C {lab_pin.sym} 1680 -740 0 1 {name=p10 sig_type=std_logic lab=in_p}
C {devices/ngspice_get_expr.sym} 2190 -1110 0 0 {name=r10 
node="[format %.4g [expr [ngspice::get_node \{@m.xmp_cs_load.m0[gm]\}] / [ngspice::get_node \{i(@m.xmp_cs_load.m0[id])\}]]]"
descr="gm/ID="}
C {devices/ngspice_get_value.sym} 2190 -1080 0 0 {name=r4 node=v(@m.xmp_cs_load.m0[vdsat])
descr="vdsat="}
C {devices/ngspice_get_value.sym} 2190 -1050 0 0 {name=r6 node=v(@m.xmp_cs_load.m0[vds])
descr="vds="}
C {devices/ngspice_get_value.sym} 2250 -1110 0 0 {name=r7 node=i(@m.xmp_cs_load.m0[id])
descr="id="}
C {devices/ngspice_get_value.sym} 2250 -1080 0 0 {name=r8 node=@m.xmp_cs_load.m0[gm]
descr="gm="}
C {devices/ngspice_get_expr.sym} 2620 -790 0 0 {name=r1 
node="[format %.4g [expr [ngspice::get_node \{@m.xmn_cd.m0[gm]\}] / [ngspice::get_node \{i(@m.xmn_cd.m0[id])\}]]]"
descr="gm/ID="}
C {devices/ngspice_get_value.sym} 2620 -760 0 0 {name=r3 node=v(@m.xmn_cd.m0[vdsat])
descr="vdsat="}
C {devices/ngspice_get_value.sym} 2620 -730 0 0 {name=r5 node=v(@m.xmn_cd.m0[vds])
descr="vds="}
C {devices/ngspice_get_value.sym} 2680 -790 0 0 {name=r9 node=i(@m.xmn_cd.m0[id])
descr="id="}
C {devices/ngspice_get_value.sym} 2680 -760 0 0 {name=r11 node=@m.xmn_cd.m0[gm]
descr="gm="}
C {devices/ngspice_get_expr.sym} 2620 -440 0 0 {name=r12 
node="[format %.4g [expr [ngspice::get_node \{@m.xmn_cd_load.m0[gm]\}] / [ngspice::get_node \{i(@m.xmn_cd_load.m0[id])\}]]]"
descr="gm/ID="}
C {devices/ngspice_get_value.sym} 2620 -410 0 0 {name=r13 node=v(@m.xmn_cd_load.m0[vdsat])
descr="vdsat="}
C {devices/ngspice_get_value.sym} 2620 -380 0 0 {name=r14 node=v(@m.xmn_cd_load.m0[vds])
descr="vds="}
C {devices/ngspice_get_value.sym} 2680 -440 0 0 {name=r15 node=i(@m.xmn_cd_load.m0[id])
descr="id="}
C {devices/ngspice_get_value.sym} 2680 -410 0 0 {name=r16 node=@m.xmn_cd_load.m0[gm]
descr="gm="}
C {devices/ngspice_get_expr.sym} 2170 -570 0 0 {name=r17 
node="[format %.4g [expr [ngspice::get_node \{@m.xmn_cs.m0[gm]\}] / [ngspice::get_node \{i(@m.xmn_cs.m0[id])\}]]]"
descr="gm/ID="}
C {devices/ngspice_get_value.sym} 2170 -540 0 0 {name=r18 node=v(@m.xmn_cs.m0[vdsat])
descr="vdsat="}
C {devices/ngspice_get_value.sym} 2170 -510 0 0 {name=r19 node=v(@m.xmn_cs.m0[vds])
descr="vds="}
C {devices/ngspice_get_value.sym} 2230 -570 0 0 {name=r20 node=i(@m.xmn_cs.m0[id])
descr="id="}
C {devices/ngspice_get_value.sym} 2230 -540 0 0 {name=r21 node=@m.xmn_cs.m0[gm]
descr="gm="}
C {devices/ngspice_get_expr.sym} 1650 -380 0 0 {name=r22 
node="[format %.4g [expr [ngspice::get_node \{@m.xmn_load_r.m0[gm]\}] / [ngspice::get_node \{i(@m.xmn_load_r.m0[id])\}]]]"
descr="gm/ID="}
C {devices/ngspice_get_value.sym} 1650 -350 0 0 {name=r23 node=v(@m.xmn_load_r.m0[vdsat])
descr="vdsat="}
C {devices/ngspice_get_value.sym} 1650 -320 0 0 {name=r24 node=v(@m.xmn_load_r.m0[vds])
descr="vds="}
C {devices/ngspice_get_value.sym} 1710 -380 0 0 {name=r25 node=i(@m.xmn_load_r.m0[id])
descr="id="}
C {devices/ngspice_get_value.sym} 1710 -350 0 0 {name=r26 node=@m.xmn_load_r.m0[gm]
descr="gm="}
C {devices/ngspice_get_expr.sym} 990 -390 0 0 {name=r27 
node="[format %.4g [expr [ngspice::get_node \{@m.xmn_load_l.m0[gm]\}] / [ngspice::get_node \{i(@m.xmn_load_l.m0[id])\}]]]"
descr="gm/ID="}
C {devices/ngspice_get_value.sym} 990 -360 0 0 {name=r28 node=v(@m.xmn_load_l.m0[vdsat])
descr="vdsat="}
C {devices/ngspice_get_value.sym} 990 -330 0 0 {name=r29 node=v(@m.xmn_load_l.m0[vds])
descr="vds="}
C {devices/ngspice_get_value.sym} 1050 -390 0 0 {name=r30 node=i(@m.xmn_load_l.m0[id])
descr="id="}
C {devices/ngspice_get_value.sym} 1050 -360 0 0 {name=r31 node=@m.xmn_load_l.m0[gm]
descr="gm="}
C {devices/ngspice_get_expr.sym} 1440 -680 0 0 {name=r37 
node="[format %.4g [expr [ngspice::get_node \{@m.xmp_diff_r.m0[gm]\}] / [ngspice::get_node \{i(@m.xmp_diff_r.m0[id])\}]]]"
descr="gm/ID="}
C {devices/ngspice_get_value.sym} 1440 -650 0 0 {name=r38 node=v(@m.xmp_diff_r.m0[vdsat])
descr="vdsat="}
C {devices/ngspice_get_value.sym} 1440 -620 0 0 {name=r39 node=v(@m.xmp_diff_r.m0[vds])
descr="vds="}
C {devices/ngspice_get_value.sym} 1500 -680 0 0 {name=r40 node=i(@m.xmp_diff_r.m0[id])
descr="id="}
C {devices/ngspice_get_value.sym} 1500 -650 0 0 {name=r41 node=@m.xmp_diff_r.m0[gm]
descr="gm="}
C {devices/ngspice_get_expr.sym} 1150 -680 0 0 {name=r42 
node="[format %.4g [expr [ngspice::get_node \{@m.xmp_diff_l.m0[gm]\}] / [ngspice::get_node \{i(@m.xmp_diff_l.m0[id])\}]]]"
descr="gm/ID="}
C {devices/ngspice_get_value.sym} 1150 -650 0 0 {name=r43 node=v(@m.xmp_diff_l.m0[vdsat])
descr="vdsat="}
C {devices/ngspice_get_value.sym} 1150 -620 0 0 {name=r44 node=v(@m.xmp_diff_l.m0[vds])
descr="vds="}
C {devices/ngspice_get_value.sym} 1210 -680 0 0 {name=r45 node=i(@m.xmp_diff_l.m0[id])
descr="id="}
C {devices/ngspice_get_value.sym} 1210 -650 0 0 {name=r46 node=@m.xmp_diff_l.m0[gm]
descr="gm="}
C {devices/ngspice_get_expr.sym} 1210 -1040 0 0 {name=r32 
node="[format %.4g [expr [ngspice::get_node \{@m.xmp_tail.m0[gm]\}] / [ngspice::get_node \{i(@m.xmp_tail.m0[id])\}]]]"
descr="gm/ID="}
C {devices/ngspice_get_value.sym} 1270 -1040 0 0 {name=r35 node=i(@m.xmp_tail.m0[id])
descr="id="}
C {devices/ngspice_get_expr.sym} 510 -1140 0 0 {name=r47 
node="[format %.4g [expr [ngspice::get_node \{@m.xmp_mirror.m0[gm]\}] / [ngspice::get_node \{i(@m.xmp_mirror.m0[id])\}]]]"
descr="gm/ID="}
C {devices/ngspice_get_value.sym} 510 -1110 0 0 {name=r48 node=v(@m.xmp_mirror.m0[vdsat])
descr="vdsat="}
C {devices/ngspice_get_value.sym} 510 -1080 0 0 {name=r49 node=v(@m.xmp_mirror.m0[vds])
descr="vds="}
C {devices/ngspice_get_value.sym} 570 -1140 0 0 {name=r50 node=i(@m.xmp_mirror.m0[id])
descr="id="}
C {devices/ngspice_get_value.sym} 570 -1110 0 0 {name=r51 node=@m.xmp_mirror.m0[gm]
descr="gm="}
C {devices/code_shown.sym} -410 -1390 0 0 {name=COMMANDS1 only_toplevel=false
value="
.save @m.xmp_mirror.m0[gds] 
.save @m.xmp_mirror.m0[gm] 
.save @m.xmp_mirror.m0[id]
.save @m.xmp_mirror.m0[vth]
.save @m.xmp_mirror.m0[vdsat]
.save @m.xmp_mirror.m0[vds]


.save @m.xmp_tail.m0[gds] 
.save @m.xmp_tail.m0[gm] 
.save @m.xmp_tail.m0[id]
.save @m.xmp_tail.m0[vth]
.save @m.xmp_tail.m0[vdsat]
.save @m.xmp_tail.m0[vds]

.save @m.xmp_diff_l.m0[gds] 
.save @m.xmp_diff_l.m0[gm] 
.save @m.xmp_diff_l.m0[id]
.save @m.xmp_diff_l.m0[vth]
.save @m.xmp_diff_l.m0[vdsat]
.save @m.xmp_diff_l.m0[vds]

.save @m.xmp_diff_r.m0[gds] 
.save @m.xmp_diff_r.m0[gm] 
.save @m.xmp_diff_r.m0[id]
.save @m.xmp_diff_r.m0[vth]
.save @m.xmp_diff_r.m0[vdsat]
.save @m.xmp_diff_r.m0[vds]

.save @m.xmn_load_l.m0[gds] 
.save @m.xmn_load_l.m0[gm] 
.save @m.xmn_load_l.m0[id]
.save @m.xmn_load_l.m0[vth]
.save @m.xmn_load_l.m0[vdsat]
.save @m.xmn_load_l.m0[vds]

.save @m.xmn_load_r.m0[gds] 
.save @m.xmn_load_r.m0[gm] 
.save @m.xmn_load_r.m0[id]
.save @m.xmn_load_r.m0[vth]
.save @m.xmn_load_r.m0[vdsat]
.save @m.xmn_load_r.m0[vds]

.save @m.xmp_cs_load.m0[gds] 
.save @m.xmp_cs_load.m0[gm] 
.save @m.xmp_cs_load.m0[id]
.save @m.xmp_cs_load.m0[vth]
.save @m.xmp_cs_load.m0[vdsat]
.save @m.xmp_cs_load.m0[vds]

.save @m.xmn_cs.m0[gds] 
.save @m.xmn_cs.m0[gm] 
.save @m.xmn_cs.m0[id]
.save @m.xmn_cs.m0[vth]
.save @m.xmn_cs.m0[vdsat]
.save @m.xmn_cs.m0[vds]

.save @m.xmn_cd_load.m0[gds] 
.save @m.xmn_cd_load.m0[gm] 
.save @m.xmn_cd_load.m0[id]
.save @m.xmn_cd_load.m0[vth]
.save @m.xmn_cd_load.m0[vdsat]
.save @m.xmn_cd_load.m0[vds]

.save @m.xmn_cd.m0[gds] 
.save @m.xmn_cd.m0[gm] 
.save @m.xmn_cd.m0[id]
.save @m.xmn_cd.m0[vth]
.save @m.xmn_cd.m0[vdsat]
.save @m.xmn_cd.m0[vds]
.save @m.xmn_cd.m0[cgs]


"}
C {devices/code_shown.sym} 100 -920 0 0 {name=NGSPICE only_toplevel=true
value="

.control
save all


** Simulation

op

ac dec 20 1 1e9

** Plots




setplot ac1



**plot db(v(out)) 
**plot 180*cph(v(out))/pi


**plot db(v(cs))
**plot 180*cph(v(cs))/pi

plot db(v(cd))
plot 180*cph(v(cd))/pi

setplot op1
print @m.xmp_mirror.m0[id]


write TIA_TB_op.raw
.endc
"}
C {lab_pin.sym} 1310 -1600 3 1 {name=p1 sig_type=std_logic lab=vss}
C {lab_wire.sym} 1080 -1460 1 0 {name=p13 sig_type=std_logic lab=vss
}
C {lab_wire.sym} 1080 -1680 3 0 {name=p14 sig_type=std_logic lab=in_p
}
C {vsource.sym} 1080 -1530 0 0 {name=V5 value="1.2 AC 1" savecurrent=false}
C {devices/code_shown.sym} 10 -80 0 0 {name=MODELS only_toplevel=true
format="tcleval( @value )"
value="
.include $::180MCU_MODELS/design.ngspice
.lib $::180MCU_MODELS/sm141064.ngspice typical
"}
C {launcher.sym} 730 -700 0 0 {name=h1
descr="Annotate OP"
tclcommand= "set show_hidden_texts 1; xschem annotate_op"}
C {devices/ngspice_get_value.sym} 1210 -1000 0 0 {name=r33 node=v(@m.xmp_tail.m0[vdsat])
descr="vdsat="}
C {devices/ngspice_get_value.sym} 1210 -970 0 0 {name=r34 node=v(@m.xmp_tail.m0[vds])
descr="vds="}
C {devices/ngspice_get_value.sym} 1270 -1000 0 0 {name=r36 node=@m.xmp_tail.m0[gm]
descr="gm="}
C {lab_pin.sym} 1350 -740 2 1 {name=p8 sig_type=std_logic lab=vdd}
C {ipin.sym} 690 -1610 0 0 {name=p15 lab=in_p}
C {lab_pin.sym} 750 -1610 0 1 {name=p16 sig_type=std_logic lab=in_p
}
C {ipin.sym} 690 -1580 0 0 {name=p17 lab=in_n}
C {lab_pin.sym} 750 -1580 0 1 {name=p18 sig_type=std_logic lab=in_n
}
C {ipin.sym} 690 -1550 0 0 {name=p19 lab=vdd}
C {lab_pin.sym} 750 -1550 0 1 {name=p20 sig_type=std_logic lab=vdd
}
C {ipin.sym} 690 -1520 0 0 {name=p21 lab=vss}
C {lab_pin.sym} 750 -1520 0 1 {name=p22 sig_type=std_logic lab=vss
}
C {isource.sym} 1390 -1530 0 0 {name=I1 value=20u}
C {gnd.sym} 1390 -1460 0 0 {name=l2 lab=GND}
C {lab_pin.sym} 1390 -1600 3 1 {name=p25 sig_type=std_logic lab=i_ref}
C {ipin.sym} 690 -1490 0 0 {name=p28 lab=i_ref}
C {lab_pin.sym} 750 -1490 0 1 {name=p29 sig_type=std_logic lab=i_ref
}
C {lab_pin.sym} 670 -940 1 1 {name=p30 sig_type=std_logic lab=i_ref
}
C {opin.sym} 2580 -630 0 0 {name=p11 lab=out}
C {lab_pin.sym} 1700 -570 2 1 {name=p23 sig_type=std_logic lab=cs}
C {lab_pin.sym} 2150 -770 2 1 {name=p24 sig_type=std_logic lab=cd}
C {capa.sym} 2780 -490 0 0 {name=C2
m=1
value=1p
footprint=1206
device="ceramic capacitor"}
C {lab_wire.sym} 960 -1460 1 0 {name=p3 sig_type=std_logic lab=vss
}
C {lab_wire.sym} 960 -1680 3 0 {name=p12 sig_type=std_logic lab=in_n
}
C {vsource.sym} 960 -1530 0 0 {name=V3 value="1.2 AC -1" savecurrent=false}
C {devices/ngspice_get_value.sym} 2680 -730 0 0 {name=r52 node=@m.xmn_cd.m0[cgs]
descr="cgs="}
