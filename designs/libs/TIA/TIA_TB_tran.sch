v {xschem version=3.4.7 file_version=1.2}
G {}
K {}
V {}
S {}
E {}
N 2220 -1300 2220 -1230 {lab=vdd}
N 1840 -1300 1840 -1230 {lab=vdd}
N 2940 -1300 2940 -1230 {lab=vdd}
N 2220 -1300 2800 -1300 {lab=vdd}
N 2350 -1200 2760 -1200 {lab=i_ref}
N 2350 -1250 2350 -1200 {lab=i_ref}
N 2150 -1250 2350 -1250 {lab=i_ref}
N 2150 -1250 2150 -1200 {lab=i_ref}
N 2020 -970 2020 -890 {lab=#net1}
N 2020 -970 2220 -970 {lab=#net1}
N 2220 -1060 2220 -970 {lab=#net1}
N 2220 -970 2430 -970 {lab=#net1}
N 2430 -960 2430 -890 {lab=#net1}
N 2430 -970 2430 -960 {lab=#net1}
N 2020 -830 2020 -580 {lab=#net2}
N 2430 -830 2430 -580 {lab=cs}
N 2060 -550 2390 -550 {lab=#net2}
N 2090 -600 2090 -550 {lab=#net2}
N 2020 -600 2090 -600 {lab=#net2}
N 2020 -520 2020 -430 {lab=vss}
N 2430 -520 2430 -430 {lab=vss}
N 2020 -430 2430 -430 {lab=vss}
N 2940 -1060 2940 -750 {lab=cd}
N 2430 -430 2800 -430 {lab=vss}
N 2360 -600 2360 -550 {lab=#net2}
N 2360 -600 2500 -600 {lab=#net2}
N 2500 -600 2500 -550 {lab=#net2}
N 2500 -550 3070 -550 {lab=#net2}
N 3380 -520 3380 -440 {lab=vss}
N 2940 -430 3250 -430 {lab=vss}
N 3380 -440 3380 -430 {lab=vss}
N 3380 -860 3380 -580 {lab=out}
N 2940 -1300 3250 -1300 {lab=vdd}
N 3380 -1190 3380 -920 {lab=vdd}
N 1880 -860 1980 -860 {lab=in_n}
N 2470 -860 2560 -860 {lab=in_p}
N 2810 -760 2840 -760 {lab=#net3}
N 2900 -760 2940 -760 {lab=cd}
N 2720 -760 2750 -760 {lab=cs}
N 1910 -1200 1910 -1130 {lab=i_ref}
N 3380 -750 3460 -750 {lab=out}
N 1130 -550 1130 -510 {lab=GND}
N 1040 -550 1040 -510 {lab=vss}
N 1130 -650 1130 -610 {lab=vss}
N 1040 -650 1040 -610 {lab=vdd}
N 2210 -1330 2210 -1300 {lab=vdd}
N 2270 -430 2270 -410 {lab=vss}
N 2940 -660 2940 -430 {lab=vss}
N 2940 -750 2940 -720 {lab=cd}
N 2720 -760 2720 -690 {lab=cs}
N 2000 -550 2020 -550 {lab=vss}
N 2000 -550 2000 -500 {lab=vss}
N 2000 -500 2020 -500 {lab=vss}
N 2430 -550 2450 -550 {lab=vss}
N 2450 -550 2450 -500 {lab=vss}
N 2430 -500 2450 -500 {lab=vss}
N 2940 -690 2960 -690 {lab=vss}
N 2960 -690 2960 -640 {lab=vss}
N 2940 -640 2960 -640 {lab=vss}
N 3380 -550 3400 -550 {lab=vss}
N 3400 -550 3400 -500 {lab=vss}
N 3380 -500 3400 -500 {lab=vss}
N 3380 -890 3400 -890 {lab=vss}
N 2940 -1200 2960 -1200 {lab=vdd}
N 2960 -1250 2960 -1200 {lab=vdd}
N 2940 -1250 2960 -1250 {lab=vdd}
N 2220 -1200 2240 -1200 {lab=vdd}
N 2240 -1240 2240 -1200 {lab=vdd}
N 2220 -1240 2240 -1240 {lab=vdd}
N 1820 -1200 1840 -1200 {lab=vdd}
N 1820 -1240 1820 -1200 {lab=vdd}
N 1820 -1240 1840 -1240 {lab=vdd}
N 2020 -860 2050 -860 {lab=vdd}
N 2390 -860 2430 -860 {lab=vdd}
N 2050 -860 2390 -860 {lab=vdd}
N 2800 -1300 2940 -1300 {lab=vdd}
N 2760 -1200 2900 -1200 {lab=i_ref}
N 3250 -1300 3370 -1300 {lab=vdd}
N 3370 -1300 3380 -1300 {lab=vdd}
N 3210 -890 3340 -890 {lab=cd}
N 3070 -550 3340 -550 {lab=#net2}
N 3250 -430 3380 -430 {lab=vss}
N 2800 -430 2940 -430 {lab=vss}
N 2760 -690 2900 -690 {lab=cs}
N 960 -550 960 -510 {lab=vss}
N 1840 -1170 1840 -1120 {lab=i_ref}
N 2220 -1170 2220 -1140 {lab=#net1}
N 2940 -1170 2940 -1120 {lab=cd}
N 2960 -1200 2970 -1200 {lab=vdd}
N 3380 -1300 3380 -1190 {lab=vdd}
N 1840 -1120 1840 -1060 {lab=i_ref}
N 1840 -1130 1910 -1130 {lab=i_ref}
N 2220 -1140 2220 -1060 {lab=#net1}
N 2940 -1120 2940 -1060 {lab=cd}
N 2720 -690 2760 -690 {lab=cs}
N 2430 -690 2720 -690 {lab=cs}
N 2940 -890 3210 -890 {lab=cd}
N 1570 -1730 1630 -1730 {lab=in_p}
N 1570 -1670 1630 -1670 {lab=vdd}
N 1570 -1640 1630 -1640 {lab=vss}
N 1210 -550 1210 -510 {lab=GND}
N 1210 -650 1210 -610 {lab=i_ref}
N 1570 -1610 1630 -1610 {lab=i_ref}
N 3660 -750 3660 -640 {lab=out}
N 3460 -750 3660 -750 {lab=out}
N 3660 -580 3660 -430 {lab=vss}
N 3380 -430 3660 -430 {lab=vss}
N 3660 -750 3740 -750 {lab=out}
N 3740 -750 3740 -370 {lab=out}
N 1790 -860 1790 -370 {lab=in_n}
N 1790 -860 1880 -860 {lab=in_n}
N 1790 -290 2720 -290 {lab=in_n}
N 1790 -370 1790 -290 {lab=in_n}
N 3740 -370 3740 -290 {lab=out}
N 2780 -290 3010 -290 {lab=in_n}
N 3070 -290 3740 -290 {lab=out}
N 2720 -290 2780 -290 {lab=in_n}
N 960 -650 960 -610 {lab=in_p}
N 890 -650 890 -610 {lab=in_n}
N 890 -670 890 -650 {lab=in_n}
N 890 -550 890 -530 {lab=vss}
N 890 -470 890 -420 {lab=vss}
N 890 -530 890 -470 {lab=vss}
N 3040 -350 3040 -310 {lab=vdd}
N 2780 -820 2780 -780 {lab=vdd}
N 1880 -1200 2180 -1200 {lab=i_ref}
N 1840 -1300 2220 -1300 {lab=vdd}
C {symbols/pfet_03v3.sym} 2200 -1200 0 0 {name=MP_TAIL
L=2u
W=15u
nf=3
m=8
ad="'int((nf+1)/2) * W/nf * 0.18u'"
pd="'2*int((nf+1)/2) * (W/nf + 0.18u)'"
as="'int((nf+2)/2) * W/nf * 0.18u'"
ps="'2*int((nf+2)/2) * (W/nf + 0.18u)'"
nrd="'0.18u / W'" nrs="'0.18u / W'"
sa=0 sb=0 sd=0
model=pfet_03v3
spiceprefix=X
}
C {symbols/pfet_03v3.sym} 2000 -860 0 0 {name=MP_DIFF_L
L=2u
W=10u
nf=2
m=10
ad="'int((nf+1)/2) * W/nf * 0.18u'"
pd="'2*int((nf+1)/2) * (W/nf + 0.18u)'"
as="'int((nf+2)/2) * W/nf * 0.18u'"
ps="'2*int((nf+2)/2) * (W/nf + 0.18u)'"
nrd="'0.18u / W'" nrs="'0.18u / W'"
sa=0 sb=0 sd=0
model=pfet_03v3
spiceprefix=X
}
C {symbols/pfet_03v3.sym} 2450 -860 0 1 {name=MP_DIFF_R
L=2u
W=10u
nf=2
m=10
ad="'int((nf+1)/2) * W/nf * 0.18u'"
pd="'2*int((nf+1)/2) * (W/nf + 0.18u)'"
as="'int((nf+2)/2) * W/nf * 0.18u'"
ps="'2*int((nf+2)/2) * (W/nf + 0.18u)'"
nrd="'0.18u / W'" nrs="'0.18u / W'"
sa=0 sb=0 sd=0
model=pfet_03v3
spiceprefix=X
}
C {symbols/pfet_03v3.sym} 2920 -1200 0 0 {name=MP_CS_LOAD
L=2u
W=15u
nf=3
m=25
ad="'int((nf+1)/2) * W/nf * 0.18u'"
pd="'2*int((nf+1)/2) * (W/nf + 0.18u)'"
as="'int((nf+2)/2) * W/nf * 0.18u'"
ps="'2*int((nf+2)/2) * (W/nf + 0.18u)'"
nrd="'0.18u / W'" nrs="'0.18u / W'"
sa=0 sb=0 sd=0
model=pfet_03v3
spiceprefix=X
}
C {symbols/pfet_03v3.sym} 1860 -1200 0 1 {name=MP_MIRROR
L=2u
W=15u
nf=3
m=1
ad="'int((nf+1)/2) * W/nf * 0.18u'"
pd="'2*int((nf+1)/2) * (W/nf + 0.18u)'"
as="'int((nf+2)/2) * W/nf * 0.18u'"
ps="'2*int((nf+2)/2) * (W/nf + 0.18u)'"
nrd="'0.18u / W'" nrs="'0.18u / W'"
sa=0 sb=0 sd=0
model=pfet_03v3
spiceprefix=X
}
C {symbols/nfet_03v3.sym} 2410 -550 0 0 {name=MN_LOAD_R
L=2u
W=12u
nf=1
m=1
ad="'int((nf+1)/2) * W/nf * 0.18u'"
pd="'2*int((nf+1)/2) * (W/nf + 0.18u)'"
as="'int((nf+2)/2) * W/nf * 0.18u'"
ps="'2*int((nf+2)/2) * (W/nf + 0.18u)'"
nrd="'0.18u / W'" nrs="'0.18u / W'"
sa=0 sb=0 sd=0
model=nfet_03v3
spiceprefix=X
}
C {symbols/nfet_03v3.sym} 2040 -550 0 1 {name=MN_LOAD_L
L=2u
W=12u
nf=1
m=1
ad="'int((nf+1)/2) * W/nf * 0.18u'"
pd="'2*int((nf+1)/2) * (W/nf + 0.18u)'"
as="'int((nf+2)/2) * W/nf * 0.18u'"
ps="'2*int((nf+2)/2) * (W/nf + 0.18u)'"
nrd="'0.18u / W'" nrs="'0.18u / W'"
sa=0 sb=0 sd=0
model=nfet_03v3
spiceprefix=X
}
C {symbols/nfet_03v3.sym} 2920 -690 0 0 {name=MN_CS
L=2u
W=20u
nf=10
m=11
ad="'int((nf+1)/2) * W/nf * 0.18u'"
pd="'2*int((nf+1)/2) * (W/nf + 0.18u)'"
as="'int((nf+2)/2) * W/nf * 0.18u'"
ps="'2*int((nf+2)/2) * (W/nf + 0.18u)'"
nrd="'0.18u / W'" nrs="'0.18u / W'"
sa=0 sb=0 sd=0
model=nfet_03v3
spiceprefix=X
}
C {symbols/nfet_03v3.sym} 3360 -890 0 0 {name=MN_CD
L=2u
W=10u
nf=10
m=26
ad="'int((nf+1)/2) * W/nf * 0.18u'"
pd="'2*int((nf+1)/2) * (W/nf + 0.18u)'"
as="'int((nf+2)/2) * W/nf * 0.18u'"
ps="'2*int((nf+2)/2) * (W/nf + 0.18u)'"
nrd="'0.18u / W'" nrs="'0.18u / W'"
sa=0 sb=0 sd=0
model=nfet_03v3
spiceprefix=X
}
C {symbols/nfet_03v3.sym} 3360 -550 0 0 {name=MN_CD_LOAD
L=2u
W=12u
nf=1
m=8
ad="'int((nf+1)/2) * W/nf * 0.18u'"
pd="'2*int((nf+1)/2) * (W/nf + 0.18u)'"
as="'int((nf+2)/2) * W/nf * 0.18u'"
ps="'2*int((nf+2)/2) * (W/nf + 0.18u)'"
nrd="'0.18u / W'" nrs="'0.18u / W'"
sa=0 sb=0 sd=0
model=nfet_03v3
spiceprefix=X
}
C {vsource.sym} 1040 -580 0 0 {name=V3 value=3.3 savecurrent=false}
C {vsource.sym} 1130 -580 0 0 {name=V4 value=0 savecurrent=false}
C {gnd.sym} 1130 -510 0 0 {name=l4 lab=GND}
C {lab_pin.sym} 1040 -650 3 1 {name=p12 sig_type=std_logic lab=vdd}
C {lab_pin.sym} 1040 -510 1 1 {name=p17 sig_type=std_logic lab=vss}
C {lab_pin.sym} 2210 -1330 3 1 {name=p18 sig_type=std_logic lab=vdd}
C {lab_pin.sym} 2270 -410 1 1 {name=p32 sig_type=std_logic lab=vss}
C {lab_pin.sym} 3400 -890 0 1 {name=p38 sig_type=std_logic lab=vss}
C {lab_pin.sym} 2560 -860 0 1 {name=p39 sig_type=std_logic lab=in_p}
C {devices/ngspice_get_expr.sym} 3070 -1230 0 0 {name=r106 
node="[format %.4g [expr [ngspice::get_node \{@m.xmp_cs_load.m0[gm]\}] / [ngspice::get_node \{i(@m.xmp_cs_load.m0[id])\}]]]"
descr="gm/ID="}
C {devices/ngspice_get_value.sym} 3070 -1200 0 0 {name=r107 node=v(@m.xmp_cs_load.m0[vdsat])
descr="vdsat="}
C {devices/ngspice_get_value.sym} 3070 -1170 0 0 {name=r108 node=v(@m.xmp_cs_load.m0[vds])
descr="vds="}
C {devices/ngspice_get_value.sym} 3130 -1230 0 0 {name=r109 node=i(@m.xmp_cs_load.m0[id])
descr="id="}
C {devices/ngspice_get_value.sym} 3130 -1200 0 0 {name=r110 node=@m.xmp_cs_load.m0[gm]
descr="gm="}
C {devices/ngspice_get_expr.sym} 3500 -910 0 0 {name=r111 
node="[format %.4g [expr [ngspice::get_node \{@m.xmn_cd.m0[gm]\}] / [ngspice::get_node \{i(@m.xmn_cd.m0[id])\}]]]"
descr="gm/ID="}
C {devices/ngspice_get_value.sym} 3500 -880 0 0 {name=r112 node=v(@m.xmn_cd.m0[vdsat])
descr="vdsat="}
C {devices/ngspice_get_value.sym} 3500 -850 0 0 {name=r113 node=v(@m.xmn_cd.m0[vds])
descr="vds="}
C {devices/ngspice_get_value.sym} 3560 -910 0 0 {name=r114 node=i(@m.xmn_cd.m0[id])
descr="id="}
C {devices/ngspice_get_value.sym} 3560 -880 0 0 {name=r115 node=@m.xmn_cd.m0[gm]
descr="gm="}
C {devices/ngspice_get_expr.sym} 3500 -560 0 0 {name=r116 
node="[format %.4g [expr [ngspice::get_node \{@m.xmn_cd_load.m0[gm]\}] / [ngspice::get_node \{i(@m.xmn_cd_load.m0[id])\}]]]"
descr="gm/ID="}
C {devices/ngspice_get_value.sym} 3500 -530 0 0 {name=r117 node=v(@m.xmn_cd_load.m0[vdsat])
descr="vdsat="}
C {devices/ngspice_get_value.sym} 3500 -500 0 0 {name=r118 node=v(@m.xmn_cd_load.m0[vds])
descr="vds="}
C {devices/ngspice_get_value.sym} 3560 -560 0 0 {name=r119 node=i(@m.xmn_cd_load.m0[id])
descr="id="}
C {devices/ngspice_get_value.sym} 3560 -530 0 0 {name=r120 node=@m.xmn_cd_load.m0[gm]
descr="gm="}
C {devices/ngspice_get_expr.sym} 3050 -690 0 0 {name=r121 
node="[format %.4g [expr [ngspice::get_node \{@m.xmn_cs.m0[gm]\}] / [ngspice::get_node \{i(@m.xmn_cs.m0[id])\}]]]"
descr="gm/ID="}
C {devices/ngspice_get_value.sym} 3050 -660 0 0 {name=r122 node=v(@m.xmn_cs.m0[vdsat])
descr="vdsat="}
C {devices/ngspice_get_value.sym} 3050 -630 0 0 {name=r123 node=v(@m.xmn_cs.m0[vds])
descr="vds="}
C {devices/ngspice_get_value.sym} 3110 -690 0 0 {name=r124 node=i(@m.xmn_cs.m0[id])
descr="id="}
C {devices/ngspice_get_value.sym} 3110 -660 0 0 {name=r125 node=@m.xmn_cs.m0[gm]
descr="gm="}
C {devices/ngspice_get_expr.sym} 2530 -500 0 0 {name=r126 
node="[format %.4g [expr [ngspice::get_node \{@m.xmn_load_r.m0[gm]\}] / [ngspice::get_node \{i(@m.xmn_load_r.m0[id])\}]]]"
descr="gm/ID="}
C {devices/ngspice_get_value.sym} 2530 -470 0 0 {name=r127 node=v(@m.xmn_load_r.m0[vdsat])
descr="vdsat="}
C {devices/ngspice_get_value.sym} 2530 -440 0 0 {name=r128 node=v(@m.xmn_load_r.m0[vds])
descr="vds="}
C {devices/ngspice_get_value.sym} 2590 -500 0 0 {name=r129 node=i(@m.xmn_load_r.m0[id])
descr="id="}
C {devices/ngspice_get_value.sym} 2590 -470 0 0 {name=r130 node=@m.xmn_load_r.m0[gm]
descr="gm="}
C {devices/ngspice_get_expr.sym} 1870 -510 0 0 {name=r131 
node="[format %.4g [expr [ngspice::get_node \{@m.xmn_load_l.m0[gm]\}] / [ngspice::get_node \{i(@m.xmn_load_l.m0[id])\}]]]"
descr="gm/ID="}
C {devices/ngspice_get_value.sym} 1870 -480 0 0 {name=r132 node=v(@m.xmn_load_l.m0[vdsat])
descr="vdsat="}
C {devices/ngspice_get_value.sym} 1870 -450 0 0 {name=r133 node=v(@m.xmn_load_l.m0[vds])
descr="vds="}
C {devices/ngspice_get_value.sym} 1930 -510 0 0 {name=r134 node=i(@m.xmn_load_l.m0[id])
descr="id="}
C {devices/ngspice_get_value.sym} 1930 -480 0 0 {name=r135 node=@m.xmn_load_l.m0[gm]
descr="gm="}
C {devices/ngspice_get_expr.sym} 2320 -800 0 0 {name=r136 
node="[format %.4g [expr [ngspice::get_node \{@m.xmp_diff_r.m0[gm]\}] / [ngspice::get_node \{i(@m.xmp_diff_r.m0[id])\}]]]"
descr="gm/ID="}
C {devices/ngspice_get_value.sym} 2320 -770 0 0 {name=r137 node=v(@m.xmp_diff_r.m0[vdsat])
descr="vdsat="}
C {devices/ngspice_get_value.sym} 2320 -740 0 0 {name=r138 node=v(@m.xmp_diff_r.m0[vds])
descr="vds="}
C {devices/ngspice_get_value.sym} 2380 -800 0 0 {name=r139 node=i(@m.xmp_diff_r.m0[id])
descr="id="}
C {devices/ngspice_get_value.sym} 2380 -770 0 0 {name=r140 node=@m.xmp_diff_r.m0[gm]
descr="gm="}
C {devices/ngspice_get_expr.sym} 2030 -800 0 0 {name=r141 
node="[format %.4g [expr [ngspice::get_node \{@m.xmp_diff_l.m0[gm]\}] / [ngspice::get_node \{i(@m.xmp_diff_l.m0[id])\}]]]"
descr="gm/ID="}
C {devices/ngspice_get_value.sym} 2030 -770 0 0 {name=r142 node=v(@m.xmp_diff_l.m0[vdsat])
descr="vdsat="}
C {devices/ngspice_get_value.sym} 2030 -740 0 0 {name=r143 node=v(@m.xmp_diff_l.m0[vds])
descr="vds="}
C {devices/ngspice_get_value.sym} 2090 -800 0 0 {name=r144 node=i(@m.xmp_diff_l.m0[id])
descr="id="}
C {devices/ngspice_get_value.sym} 2090 -770 0 0 {name=r145 node=@m.xmp_diff_l.m0[gm]
descr="gm="}
C {devices/ngspice_get_expr.sym} 2090 -1160 0 0 {name=r146 
node="[format %.4g [expr [ngspice::get_node \{@m.xmp_tail.m0[gm]\}] / [ngspice::get_node \{i(@m.xmp_tail.m0[id])\}]]]"
descr="gm/ID="}
C {devices/ngspice_get_value.sym} 2150 -1160 0 0 {name=r147 node=i(@m.xmp_tail.m0[id])
descr="id="}
C {devices/ngspice_get_expr.sym} 1680 -1260 0 0 {name=r148 
node="[format %.4g [expr [ngspice::get_node \{@m.xmp_mirror.m0[gm]\}] / [ngspice::get_node \{i(@m.xmp_mirror.m0[id])\}]]]"
descr="gm/ID="}
C {devices/ngspice_get_value.sym} 1680 -1230 0 0 {name=r149 node=v(@m.xmp_mirror.m0[vdsat])
descr="vdsat="}
C {devices/ngspice_get_value.sym} 1680 -1200 0 0 {name=r150 node=v(@m.xmp_mirror.m0[vds])
descr="vds="}
C {devices/ngspice_get_value.sym} 1740 -1260 0 0 {name=r151 node=i(@m.xmp_mirror.m0[id])
descr="id="}
C {devices/ngspice_get_value.sym} 1740 -1230 0 0 {name=r152 node=@m.xmp_mirror.m0[gm]
descr="gm="}
C {devices/code_shown.sym} -370 -1370 0 0 {name=COMMANDS2 only_toplevel=false
value="
.save @m.xmp_mirror.m0[gds] 
.save @m.xmp_mirror.m0[gm] 
.save @m.xmp_mirror.m0[id]
.save @m.xmp_mirror.m0[vth]
.save @m.xmp_mirror.m0[vdsat]
.save @m.xmp_mirror.m0[vds]


.save @m.xmp_tail.m0[gds] 
.save @m.xmp_tail.m0[gm] 
.save @m.xmp_tail.m0[id]
.save @m.xmp_tail.m0[vth]
.save @m.xmp_tail.m0[vdsat]
.save @m.xmp_tail.m0[vds]

.save @m.xmp_diff_l.m0[gds] 
.save @m.xmp_diff_l.m0[gm] 
.save @m.xmp_diff_l.m0[id]
.save @m.xmp_diff_l.m0[vth]
.save @m.xmp_diff_l.m0[vdsat]
.save @m.xmp_diff_l.m0[vds]

.save @m.xmp_diff_r.m0[gds] 
.save @m.xmp_diff_r.m0[gm] 
.save @m.xmp_diff_r.m0[id]
.save @m.xmp_diff_r.m0[vth]
.save @m.xmp_diff_r.m0[vdsat]
.save @m.xmp_diff_r.m0[vds]

.save @m.xmn_load_l.m0[gds] 
.save @m.xmn_load_l.m0[gm] 
.save @m.xmn_load_l.m0[id]
.save @m.xmn_load_l.m0[vth]
.save @m.xmn_load_l.m0[vdsat]
.save @m.xmn_load_l.m0[vds]

.save @m.xmn_load_r.m0[gds] 
.save @m.xmn_load_r.m0[gm] 
.save @m.xmn_load_r.m0[id]
.save @m.xmn_load_r.m0[vth]
.save @m.xmn_load_r.m0[vdsat]
.save @m.xmn_load_r.m0[vds]

.save @m.xmp_cs_load.m0[gds] 
.save @m.xmp_cs_load.m0[gm] 
.save @m.xmp_cs_load.m0[id]
.save @m.xmp_cs_load.m0[vth]
.save @m.xmp_cs_load.m0[vdsat]
.save @m.xmp_cs_load.m0[vds]

.save @m.xmn_cs.m0[gds] 
.save @m.xmn_cs.m0[gm] 
.save @m.xmn_cs.m0[id]
.save @m.xmn_cs.m0[vth]
.save @m.xmn_cs.m0[vdsat]
.save @m.xmn_cs.m0[vds]

.save @m.xmn_cd_load.m0[gds] 
.save @m.xmn_cd_load.m0[gm] 
.save @m.xmn_cd_load.m0[id]
.save @m.xmn_cd_load.m0[vth]
.save @m.xmn_cd_load.m0[vdsat]
.save @m.xmn_cd_load.m0[vds]

.save @m.xmn_cd.m0[gds] 
.save @m.xmn_cd.m0[gm] 
.save @m.xmn_cd.m0[id]
.save @m.xmn_cd.m0[vth]
.save @m.xmn_cd.m0[vdsat]
.save @m.xmn_cd.m0[vds]


"}
C {devices/code_shown.sym} 270 -1300 0 0 {name=NGSPICE1 only_toplevel=true
value="

.control
save all


** Simulation

let tstop = 60e-6
let tstep = 1e-9

op
**dc I_IN 10e-9 300e-6 10e-9
tran $&tstep $&tstop



** Plots

setplot tran1
let v_out = v(out)

let i_in = -(v(out)-v(in_n))/1e3

plot v_out

plot i_in



setplot op1
print @m.xmp_mirror.m0[id]
print cs
print cd
print out

print @m.xmn_cs.m0[vdsat]
print @m.xmn_cs.m0[vds]

print @m.xmp_cs_load.m0[vdsat]
print @m.xmp_cs_load.m0[vds]

print @m.xmn_cd.m0[vdsat]
print @m.xmn_cd.m0[vds]

print @m.xmn_cd_load.m0[vdsat]
print @m.xmn_cd_load.m0[vds]



write TIA_TB_tran.raw


.endc
"}
C {lab_pin.sym} 1130 -650 3 1 {name=p40 sig_type=std_logic lab=vss}
C {lab_wire.sym} 960 -510 1 0 {name=p41 sig_type=std_logic lab=vss
}
C {vsource.sym} 960 -580 0 0 {name=V6 value="1.2" savecurrent=false}
C {devices/code_shown.sym} 310 -230 0 0 {name=MODELS1 only_toplevel=true
format="tcleval( @value )"
value="
.include $::180MCU_MODELS/design.ngspice
.lib $::180MCU_MODELS/sm141064.ngspice typical
.lib $::180MCU_MODELS/sm141064.ngspice res_typical
.lib $::180MCU_MODELS/sm141064.ngspice mimcap_typical
.lib $::180MCU_MODELS/sm141064.ngspice cap_mim
"}
C {launcher.sym} 680 -840 0 0 {name=h2
descr="Annotate OP"
tclcommand= "set show_hidden_texts 1; xschem annotate_op"}
C {devices/ngspice_get_value.sym} 2090 -1120 0 0 {name=r153 node=v(@m.xmp_tail.m0[vdsat])
descr="vdsat="}
C {devices/ngspice_get_value.sym} 2090 -1090 0 0 {name=r154 node=v(@m.xmp_tail.m0[vds])
descr="vds="}
C {devices/ngspice_get_value.sym} 2150 -1120 0 0 {name=r155 node=@m.xmp_tail.m0[gm]
descr="gm="}
C {lab_pin.sym} 2230 -860 2 1 {name=p43 sig_type=std_logic lab=vdd}
C {ipin.sym} 1570 -1730 0 0 {name=p44 lab=in_p}
C {lab_pin.sym} 1630 -1730 0 1 {name=p45 sig_type=std_logic lab=in_p
}
C {ipin.sym} 1570 -1670 0 0 {name=p46 lab=vdd}
C {lab_pin.sym} 1630 -1670 0 1 {name=p47 sig_type=std_logic lab=vdd
}
C {ipin.sym} 1570 -1640 0 0 {name=p48 lab=vss}
C {lab_pin.sym} 1630 -1640 0 1 {name=p49 sig_type=std_logic lab=vss
}
C {isource.sym} 1210 -580 0 0 {name=I3 value=20u}
C {gnd.sym} 1210 -510 0 0 {name=l5 lab=GND}
C {lab_pin.sym} 1210 -650 3 1 {name=p50 sig_type=std_logic lab=i_ref}
C {ipin.sym} 1570 -1610 0 0 {name=p51 lab=i_ref}
C {lab_pin.sym} 1630 -1610 0 1 {name=p52 sig_type=std_logic lab=i_ref
}
C {lab_pin.sym} 1840 -1060 1 1 {name=p53 sig_type=std_logic lab=i_ref
}
C {lab_pin.sym} 2580 -690 2 1 {name=p55 sig_type=std_logic lab=cs}
C {lab_pin.sym} 3030 -890 2 1 {name=p56 sig_type=std_logic lab=cd}
C {capa.sym} 3660 -610 0 0 {name=C6
m=1
value=4p
footprint=1206
device="ceramic capacitor"}
C {lab_pin.sym} 1790 -860 2 1 {name=p66 sig_type=std_logic lab=in_n}
C {lab_pin.sym} 3740 -750 0 1 {name=p1 sig_type=std_logic lab=out}
C {lab_pin.sym} 960 -650 3 1 {name=p2 sig_type=std_logic lab=in_p}
C {lab_wire.sym} 890 -420 1 0 {name=p3 sig_type=std_logic lab=vss
}
C {lab_pin.sym} 890 -670 3 1 {name=p4 sig_type=std_logic lab=in_n}
C {isource.sym} 890 -580 2 0 {name=I_IN value="SIN(75e-6 74.99e-6  100e3 1e-9)"}
C {lab_pin.sym} 3040 -350 3 1 {name=p5 sig_type=std_logic lab=vdd}
C {symbols/ppolyf_u_1k.sym} 3040 -290 1 0 {name=R1
W=10e-6
L=10e-6
model=ppolyf_u_1k
spiceprefix=X
m=1}
C {lab_pin.sym} 2780 -820 3 1 {name=p6 sig_type=std_logic lab=vdd}
C {symbols/ppolyf_u_1k.sym} 2780 -760 1 0 {name=R2
W=20e-6
L=10e-6
model=ppolyf_u_1k
spiceprefix=X
m=1}
C {symbols/cap_mim_2f0fF.sym} 2870 -760 3 0 {name=C1
W=10e-6
L=10e-6
model=cap_mim_2f0fF
spiceprefix=X
m=15}
