v {xschem version=3.4.7 file_version=1.2}
G {}
K {}
V {}
S {}
E {}
N 1940 -3070 1940 -3000 {lab=vdd}
N 1310 -2970 1900 -2970 {lab=i_ref}
N 1270 -3070 1270 -3000 {lab=vdd}
N 1270 -3070 1940 -3070 {lab=vdd}
N 2660 -3070 2660 -3000 {lab=vdd}
N 1940 -3070 2520 -3070 {lab=vdd}
N 2070 -2970 2480 -2970 {lab=i_ref}
N 2070 -3020 2070 -2970 {lab=i_ref}
N 1870 -3020 2070 -3020 {lab=i_ref}
N 1870 -3020 1870 -2970 {lab=i_ref}
N 1740 -2740 1740 -2660 {lab=#net1}
N 1740 -2740 1940 -2740 {lab=#net1}
N 1940 -2830 1940 -2740 {lab=#net1}
N 1940 -2740 2150 -2740 {lab=#net1}
N 2150 -2730 2150 -2660 {lab=#net1}
N 2150 -2740 2150 -2730 {lab=#net1}
N 1740 -2600 1740 -2350 {lab=#net2}
N 2150 -2600 2150 -2350 {lab=cs}
N 1780 -2320 2110 -2320 {lab=#net2}
N 1810 -2370 1810 -2320 {lab=#net2}
N 1740 -2370 1810 -2370 {lab=#net2}
N 1740 -2290 1740 -2200 {lab=vss}
N 2150 -2290 2150 -2200 {lab=vss}
N 1740 -2200 2150 -2200 {lab=vss}
N 2660 -2830 2660 -2520 {lab=cd}
N 2150 -2200 2520 -2200 {lab=vss}
N 2080 -2370 2080 -2320 {lab=#net2}
N 2080 -2370 2220 -2370 {lab=#net2}
N 2220 -2370 2220 -2320 {lab=#net2}
N 2220 -2320 2790 -2320 {lab=#net2}
N 3100 -2290 3100 -2210 {lab=vss}
N 2660 -2200 2970 -2200 {lab=vss}
N 3100 -2210 3100 -2200 {lab=vss}
N 3100 -2630 3100 -2350 {lab=out}
N 2660 -3070 2970 -3070 {lab=vdd}
N 3100 -2960 3100 -2690 {lab=vdd}
N 1600 -2630 1700 -2630 {lab=in_n}
N 2190 -2630 2280 -2630 {lab=in_p}
N 2620 -2530 2660 -2530 {lab=cd}
N 1340 -2970 1340 -2900 {lab=i_ref}
N 3100 -2520 3180 -2520 {lab=out}
N 1910 -3390 1910 -3350 {lab=GND}
N 1820 -3390 1820 -3350 {lab=vss}
N 1910 -3490 1910 -3450 {lab=vss}
N 1820 -3490 1820 -3450 {lab=vdd}
N 1930 -3100 1930 -3070 {lab=vdd}
N 1990 -2200 1990 -2180 {lab=vss}
N 2660 -2430 2660 -2200 {lab=vss}
N 2660 -2520 2660 -2490 {lab=cd}
N 2440 -2530 2440 -2460 {lab=cs}
N 1720 -2320 1740 -2320 {lab=vss}
N 1720 -2320 1720 -2270 {lab=vss}
N 1720 -2270 1740 -2270 {lab=vss}
N 2150 -2320 2170 -2320 {lab=vss}
N 2170 -2320 2170 -2270 {lab=vss}
N 2150 -2270 2170 -2270 {lab=vss}
N 2660 -2460 2680 -2460 {lab=vss}
N 2680 -2460 2680 -2410 {lab=vss}
N 2660 -2410 2680 -2410 {lab=vss}
N 3100 -2320 3120 -2320 {lab=vss}
N 3120 -2320 3120 -2270 {lab=vss}
N 3100 -2270 3120 -2270 {lab=vss}
N 3100 -2660 3120 -2660 {lab=vss}
N 2660 -2970 2680 -2970 {lab=vdd}
N 2680 -3020 2680 -2970 {lab=vdd}
N 2660 -3020 2680 -3020 {lab=vdd}
N 1940 -2970 1960 -2970 {lab=vdd}
N 1960 -3010 1960 -2970 {lab=vdd}
N 1940 -3010 1960 -3010 {lab=vdd}
N 1250 -2970 1270 -2970 {lab=vdd}
N 1250 -3010 1250 -2970 {lab=vdd}
N 1250 -3010 1270 -3010 {lab=vdd}
N 1740 -2630 1770 -2630 {lab=vdd}
N 2110 -2630 2150 -2630 {lab=vdd}
N 1770 -2630 2110 -2630 {lab=vdd}
N 2520 -3070 2660 -3070 {lab=vdd}
N 2480 -2970 2620 -2970 {lab=i_ref}
N 2970 -3070 3090 -3070 {lab=vdd}
N 3090 -3070 3100 -3070 {lab=vdd}
N 2930 -2660 3060 -2660 {lab=cd}
N 2790 -2320 3060 -2320 {lab=#net2}
N 2970 -2200 3100 -2200 {lab=vss}
N 2520 -2200 2660 -2200 {lab=vss}
N 2480 -2460 2620 -2460 {lab=cs}
N 1680 -3390 1680 -3350 {lab=vss}
N 1680 -3570 1680 -3530 {lab=in_p}
N 1680 -3530 1680 -3450 {lab=in_p}
N 1270 -2940 1270 -2890 {lab=i_ref}
N 1940 -2940 1940 -2910 {lab=#net1}
N 2660 -2940 2660 -2890 {lab=cd}
N 2680 -2970 2690 -2970 {lab=vdd}
N 3100 -3070 3100 -2960 {lab=vdd}
N 1270 -2890 1270 -2830 {lab=i_ref}
N 1270 -2900 1340 -2900 {lab=i_ref}
N 1940 -2910 1940 -2830 {lab=#net1}
N 2660 -2890 2660 -2830 {lab=cd}
N 2440 -2460 2480 -2460 {lab=cs}
N 2150 -2460 2440 -2460 {lab=cs}
N 2660 -2660 2930 -2660 {lab=cd}
N 1290 -3500 1350 -3500 {lab=in_p}
N 1290 -3440 1350 -3440 {lab=vdd}
N 1290 -3410 1350 -3410 {lab=vss}
N 1990 -3390 1990 -3350 {lab=GND}
N 1990 -3490 1990 -3450 {lab=i_ref}
N 1290 -3380 1350 -3380 {lab=i_ref}
N 3380 -2520 3380 -2410 {lab=out}
N 3180 -2520 3380 -2520 {lab=out}
N 3380 -2350 3380 -2200 {lab=vss}
N 3100 -2200 3380 -2200 {lab=vss}
N 2050 -1610 2050 -1540 {lab=vdd}
N 1420 -1510 2010 -1510 {lab=i_ref_stb}
N 1380 -1610 1380 -1540 {lab=vdd}
N 1380 -1610 2050 -1610 {lab=vdd}
N 2770 -1610 2770 -1540 {lab=vdd}
N 2050 -1610 2630 -1610 {lab=vdd}
N 2180 -1510 2590 -1510 {lab=i_ref_stb}
N 2180 -1560 2180 -1510 {lab=i_ref_stb}
N 1980 -1560 2180 -1560 {lab=i_ref_stb}
N 1980 -1560 1980 -1510 {lab=i_ref_stb}
N 1850 -1280 1850 -1200 {lab=#net3}
N 1850 -1280 2050 -1280 {lab=#net3}
N 2050 -1370 2050 -1280 {lab=#net3}
N 2050 -1280 2260 -1280 {lab=#net3}
N 2260 -1270 2260 -1200 {lab=#net3}
N 2260 -1280 2260 -1270 {lab=#net3}
N 1850 -1140 1850 -890 {lab=#net4}
N 2260 -1140 2260 -890 {lab=#net5}
N 1890 -860 2220 -860 {lab=#net4}
N 1920 -910 1920 -860 {lab=#net4}
N 1850 -910 1920 -910 {lab=#net4}
N 1850 -830 1850 -740 {lab=vss}
N 2260 -830 2260 -740 {lab=vss}
N 1850 -740 2260 -740 {lab=vss}
N 2770 -1370 2770 -1060 {lab=#net6}
N 2260 -740 2630 -740 {lab=vss}
N 2190 -910 2190 -860 {lab=#net4}
N 2190 -910 2330 -910 {lab=#net4}
N 2330 -910 2330 -860 {lab=#net4}
N 2330 -860 2900 -860 {lab=#net4}
N 3210 -830 3210 -750 {lab=vss}
N 2770 -740 3080 -740 {lab=vss}
N 3210 -750 3210 -740 {lab=vss}
N 3210 -1170 3210 -890 {lab=out_stb}
N 2770 -1610 3080 -1610 {lab=vdd}
N 3210 -1500 3210 -1230 {lab=vdd}
N 1710 -1170 1810 -1170 {lab=#net7}
N 2300 -1170 2390 -1170 {lab=in_p}
N 2730 -1070 2770 -1070 {lab=#net6}
N 1450 -1510 1450 -1440 {lab=i_ref_stb}
N 3210 -1060 3290 -1060 {lab=out_stb}
N 2040 -1640 2040 -1610 {lab=vdd}
N 2100 -740 2100 -720 {lab=vss}
N 2770 -970 2770 -740 {lab=vss}
N 2770 -1060 2770 -1030 {lab=#net6}
N 2550 -1070 2550 -1000 {lab=#net5}
N 1830 -860 1850 -860 {lab=vss}
N 1830 -860 1830 -810 {lab=vss}
N 1830 -810 1850 -810 {lab=vss}
N 2260 -860 2280 -860 {lab=vss}
N 2280 -860 2280 -810 {lab=vss}
N 2260 -810 2280 -810 {lab=vss}
N 2770 -1000 2790 -1000 {lab=vss}
N 2790 -1000 2790 -950 {lab=vss}
N 2770 -950 2790 -950 {lab=vss}
N 3210 -860 3230 -860 {lab=vss}
N 3230 -860 3230 -810 {lab=vss}
N 3210 -810 3230 -810 {lab=vss}
N 3210 -1200 3230 -1200 {lab=vss}
N 2770 -1510 2790 -1510 {lab=vdd}
N 2790 -1560 2790 -1510 {lab=vdd}
N 2770 -1560 2790 -1560 {lab=vdd}
N 2050 -1510 2070 -1510 {lab=vdd}
N 2070 -1550 2070 -1510 {lab=vdd}
N 2050 -1550 2070 -1550 {lab=vdd}
N 1360 -1510 1380 -1510 {lab=vdd}
N 1360 -1550 1360 -1510 {lab=vdd}
N 1360 -1550 1380 -1550 {lab=vdd}
N 1850 -1170 1880 -1170 {lab=vdd}
N 2220 -1170 2260 -1170 {lab=vdd}
N 1880 -1170 2220 -1170 {lab=vdd}
N 2630 -1610 2770 -1610 {lab=vdd}
N 2590 -1510 2730 -1510 {lab=i_ref_stb}
N 3080 -1610 3200 -1610 {lab=vdd}
N 3200 -1610 3210 -1610 {lab=vdd}
N 3040 -1200 3170 -1200 {lab=#net6}
N 2900 -860 3170 -860 {lab=#net4}
N 3080 -740 3210 -740 {lab=vss}
N 2630 -740 2770 -740 {lab=vss}
N 2590 -1000 2730 -1000 {lab=#net5}
N 1380 -1480 1380 -1430 {lab=i_ref_stb}
N 2050 -1480 2050 -1450 {lab=#net3}
N 2770 -1480 2770 -1430 {lab=#net6}
N 2790 -1510 2800 -1510 {lab=vdd}
N 3210 -1610 3210 -1500 {lab=vdd}
N 1380 -1430 1380 -1370 {lab=i_ref_stb}
N 1380 -1440 1450 -1440 {lab=i_ref_stb}
N 2050 -1450 2050 -1370 {lab=#net3}
N 2770 -1430 2770 -1370 {lab=#net6}
N 2550 -1000 2590 -1000 {lab=#net5}
N 2260 -1000 2550 -1000 {lab=#net5}
N 2770 -1200 3040 -1200 {lab=#net6}
N 3490 -1060 3490 -950 {lab=out_stb}
N 3290 -1060 3490 -1060 {lab=out_stb}
N 3490 -890 3490 -740 {lab=vss}
N 3210 -740 3490 -740 {lab=vss}
N 1700 -1810 1700 -1770 {lab=GND}
N 1700 -1910 1700 -1870 {lab=i_ref_stb}
N 1690 -1170 1690 -580 {lab=#net7}
N 1690 -1170 1710 -1170 {lab=#net7}
N 3580 -1060 3580 -580 {lab=out_stb}
N 3490 -1060 3580 -1060 {lab=out_stb}
N 3380 -2520 3460 -2520 {lab=out}
N 3460 -2520 3460 -2140 {lab=out}
N 1510 -2630 1510 -2140 {lab=in_n}
N 1510 -2630 1600 -2630 {lab=in_n}
N 2340 -580 2360 -580 {
lab=#net8}
N 2340 -580 2340 -500 {
lab=#net8}
N 2320 -580 2340 -580 {
lab=#net8}
N 2210 -580 2260 -580 {lab=#net7}
N 2420 -580 2440 -580 {lab=#net9}
N 2340 -440 2340 -380 {lab=vss}
N 1510 -2060 2440 -2060 {lab=in_n}
N 1510 -2140 1510 -2060 {lab=in_n}
N 3460 -2140 3460 -2060 {lab=out}
N 1690 -580 2210 -580 {lab=#net7}
N 2440 -580 2680 -580 {lab=#net9}
N 2740 -580 3580 -580 {lab=out_stb}
N 2500 -2060 2730 -2060 {lab=#net10}
N 2790 -2060 3460 -2060 {lab=out}
N 2530 -2530 2560 -2530 {lab=#net11}
N 2440 -2530 2470 -2530 {lab=cs}
N 2500 -2590 2500 -2550 {lab=vdd}
N 2640 -1070 2670 -1070 {lab=#net12}
N 2550 -1070 2580 -1070 {lab=#net5}
N 2610 -1130 2610 -1090 {lab=vdd}
N 2710 -640 2710 -600 {lab=vdd}
N 2760 -2120 2760 -2080 {lab=vdd}
C {symbols/pfet_03v3.sym} 1920 -2970 0 0 {name=MP_TAIL
L=2u
W=15u
nf=3
m=8
ad="'int((nf+1)/2) * W/nf * 0.18u'"
pd="'2*int((nf+1)/2) * (W/nf + 0.18u)'"
as="'int((nf+2)/2) * W/nf * 0.18u'"
ps="'2*int((nf+2)/2) * (W/nf + 0.18u)'"
nrd="'0.18u / W'" nrs="'0.18u / W'"
sa=0 sb=0 sd=0
model=pfet_03v3
spiceprefix=X
}
C {symbols/pfet_03v3.sym} 1720 -2630 0 0 {name=MP_DIFF_L
L=2u
W=10u
nf=2
m=10
ad="'int((nf+1)/2) * W/nf * 0.18u'"
pd="'2*int((nf+1)/2) * (W/nf + 0.18u)'"
as="'int((nf+2)/2) * W/nf * 0.18u'"
ps="'2*int((nf+2)/2) * (W/nf + 0.18u)'"
nrd="'0.18u / W'" nrs="'0.18u / W'"
sa=0 sb=0 sd=0
model=pfet_03v3
spiceprefix=X
}
C {symbols/pfet_03v3.sym} 2170 -2630 0 1 {name=MP_DIFF_R
L=2u
W=10u
nf=2
m=10
ad="'int((nf+1)/2) * W/nf * 0.18u'"
pd="'2*int((nf+1)/2) * (W/nf + 0.18u)'"
as="'int((nf+2)/2) * W/nf * 0.18u'"
ps="'2*int((nf+2)/2) * (W/nf + 0.18u)'"
nrd="'0.18u / W'" nrs="'0.18u / W'"
sa=0 sb=0 sd=0
model=pfet_03v3
spiceprefix=X
}
C {symbols/pfet_03v3.sym} 2640 -2970 0 0 {name=MP_CS_LOAD
L=2u
W=15u
nf=3
m=25
ad="'int((nf+1)/2) * W/nf * 0.18u'"
pd="'2*int((nf+1)/2) * (W/nf + 0.18u)'"
as="'int((nf+2)/2) * W/nf * 0.18u'"
ps="'2*int((nf+2)/2) * (W/nf + 0.18u)'"
nrd="'0.18u / W'" nrs="'0.18u / W'"
sa=0 sb=0 sd=0
model=pfet_03v3
spiceprefix=X
}
C {symbols/pfet_03v3.sym} 1290 -2970 0 1 {name=MP_MIRROR
L=2u
W=15u
nf=3
m=1
ad="'int((nf+1)/2) * W/nf * 0.18u'"
pd="'2*int((nf+1)/2) * (W/nf + 0.18u)'"
as="'int((nf+2)/2) * W/nf * 0.18u'"
ps="'2*int((nf+2)/2) * (W/nf + 0.18u)'"
nrd="'0.18u / W'" nrs="'0.18u / W'"
sa=0 sb=0 sd=0
model=pfet_03v3
spiceprefix=X
}
C {symbols/nfet_03v3.sym} 2130 -2320 0 0 {name=MN_LOAD_R
L=2u
W=12u
nf=1
m=1
ad="'int((nf+1)/2) * W/nf * 0.18u'"
pd="'2*int((nf+1)/2) * (W/nf + 0.18u)'"
as="'int((nf+2)/2) * W/nf * 0.18u'"
ps="'2*int((nf+2)/2) * (W/nf + 0.18u)'"
nrd="'0.18u / W'" nrs="'0.18u / W'"
sa=0 sb=0 sd=0
model=nfet_03v3
spiceprefix=X
}
C {symbols/nfet_03v3.sym} 1760 -2320 0 1 {name=MN_LOAD_L
L=2u
W=12u
nf=1
m=1
ad="'int((nf+1)/2) * W/nf * 0.18u'"
pd="'2*int((nf+1)/2) * (W/nf + 0.18u)'"
as="'int((nf+2)/2) * W/nf * 0.18u'"
ps="'2*int((nf+2)/2) * (W/nf + 0.18u)'"
nrd="'0.18u / W'" nrs="'0.18u / W'"
sa=0 sb=0 sd=0
model=nfet_03v3
spiceprefix=X
}
C {symbols/nfet_03v3.sym} 2640 -2460 0 0 {name=MN_CS
L=2u
W=20u
nf=10
m=11
ad="'int((nf+1)/2) * W/nf * 0.18u'"
pd="'2*int((nf+1)/2) * (W/nf + 0.18u)'"
as="'int((nf+2)/2) * W/nf * 0.18u'"
ps="'2*int((nf+2)/2) * (W/nf + 0.18u)'"
nrd="'0.18u / W'" nrs="'0.18u / W'"
sa=0 sb=0 sd=0
model=nfet_03v3
spiceprefix=X
}
C {symbols/nfet_03v3.sym} 3080 -2660 0 0 {name=MN_CD
L=2u
W=10u
nf=10
m=26
ad="'int((nf+1)/2) * W/nf * 0.18u'"
pd="'2*int((nf+1)/2) * (W/nf + 0.18u)'"
as="'int((nf+2)/2) * W/nf * 0.18u'"
ps="'2*int((nf+2)/2) * (W/nf + 0.18u)'"
nrd="'0.18u / W'" nrs="'0.18u / W'"
sa=0 sb=0 sd=0
model=nfet_03v3
spiceprefix=X
}
C {symbols/nfet_03v3.sym} 3080 -2320 0 0 {name=MN_CD_LOAD
L=2u
W=12u
nf=1
m=8
ad="'int((nf+1)/2) * W/nf * 0.18u'"
pd="'2*int((nf+1)/2) * (W/nf + 0.18u)'"
as="'int((nf+2)/2) * W/nf * 0.18u'"
ps="'2*int((nf+2)/2) * (W/nf + 0.18u)'"
nrd="'0.18u / W'" nrs="'0.18u / W'"
sa=0 sb=0 sd=0
model=nfet_03v3
spiceprefix=X
}
C {vsource.sym} 1820 -3420 0 0 {name=V1 value=3.3 savecurrent=false}
C {vsource.sym} 1910 -3420 0 0 {name=V2 value=0 savecurrent=false}
C {gnd.sym} 1910 -3350 0 0 {name=l1 lab=GND}
C {lab_pin.sym} 1820 -3490 3 1 {name=p2 sig_type=std_logic lab=vdd}
C {lab_pin.sym} 1820 -3350 1 1 {name=p4 sig_type=std_logic lab=vss}
C {lab_pin.sym} 1930 -3100 3 1 {name=p5 sig_type=std_logic lab=vdd}
C {lab_pin.sym} 1990 -2180 1 1 {name=p6 sig_type=std_logic lab=vss}
C {lab_pin.sym} 3120 -2660 0 1 {name=p7 sig_type=std_logic lab=vss}
C {lab_pin.sym} 2280 -2630 0 1 {name=p10 sig_type=std_logic lab=in_p}
C {devices/ngspice_get_expr.sym} 2790 -3000 0 0 {name=r10 
node="[format %.4g [expr [ngspice::get_node \{@m.xmp_cs_load.m0[gm]\}] / [ngspice::get_node \{i(@m.xmp_cs_load.m0[id])\}]]]"
descr="gm/ID="}
C {devices/ngspice_get_value.sym} 2790 -2970 0 0 {name=r4 node=v(@m.xmp_cs_load.m0[vdsat])
descr="vdsat="}
C {devices/ngspice_get_value.sym} 2790 -2940 0 0 {name=r6 node=v(@m.xmp_cs_load.m0[vds])
descr="vds="}
C {devices/ngspice_get_value.sym} 2850 -3000 0 0 {name=r7 node=i(@m.xmp_cs_load.m0[id])
descr="id="}
C {devices/ngspice_get_value.sym} 2850 -2970 0 0 {name=r8 node=@m.xmp_cs_load.m0[gm]
descr="gm="}
C {devices/ngspice_get_expr.sym} 3220 -2680 0 0 {name=r1 
node="[format %.4g [expr [ngspice::get_node \{@m.xmn_cd.m0[gm]\}] / [ngspice::get_node \{i(@m.xmn_cd.m0[id])\}]]]"
descr="gm/ID="}
C {devices/ngspice_get_value.sym} 3220 -2650 0 0 {name=r3 node=v(@m.xmn_cd.m0[vdsat])
descr="vdsat="}
C {devices/ngspice_get_value.sym} 3220 -2620 0 0 {name=r5 node=v(@m.xmn_cd.m0[vds])
descr="vds="}
C {devices/ngspice_get_value.sym} 3280 -2680 0 0 {name=r9 node=i(@m.xmn_cd.m0[id])
descr="id="}
C {devices/ngspice_get_value.sym} 3280 -2650 0 0 {name=r11 node=@m.xmn_cd.m0[gm]
descr="gm="}
C {devices/ngspice_get_expr.sym} 3220 -2330 0 0 {name=r12 
node="[format %.4g [expr [ngspice::get_node \{@m.xmn_cd_load.m0[gm]\}] / [ngspice::get_node \{i(@m.xmn_cd_load.m0[id])\}]]]"
descr="gm/ID="}
C {devices/ngspice_get_value.sym} 3220 -2300 0 0 {name=r13 node=v(@m.xmn_cd_load.m0[vdsat])
descr="vdsat="}
C {devices/ngspice_get_value.sym} 3220 -2270 0 0 {name=r14 node=v(@m.xmn_cd_load.m0[vds])
descr="vds="}
C {devices/ngspice_get_value.sym} 3280 -2330 0 0 {name=r15 node=i(@m.xmn_cd_load.m0[id])
descr="id="}
C {devices/ngspice_get_value.sym} 3280 -2300 0 0 {name=r16 node=@m.xmn_cd_load.m0[gm]
descr="gm="}
C {devices/ngspice_get_expr.sym} 2770 -2460 0 0 {name=r17 
node="[format %.4g [expr [ngspice::get_node \{@m.xmn_cs.m0[gm]\}] / [ngspice::get_node \{i(@m.xmn_cs.m0[id])\}]]]"
descr="gm/ID="}
C {devices/ngspice_get_value.sym} 2770 -2430 0 0 {name=r18 node=v(@m.xmn_cs.m0[vdsat])
descr="vdsat="}
C {devices/ngspice_get_value.sym} 2770 -2400 0 0 {name=r19 node=v(@m.xmn_cs.m0[vds])
descr="vds="}
C {devices/ngspice_get_value.sym} 2830 -2460 0 0 {name=r20 node=i(@m.xmn_cs.m0[id])
descr="id="}
C {devices/ngspice_get_value.sym} 2830 -2430 0 0 {name=r21 node=@m.xmn_cs.m0[gm]
descr="gm="}
C {devices/ngspice_get_expr.sym} 2250 -2270 0 0 {name=r22 
node="[format %.4g [expr [ngspice::get_node \{@m.xmn_load_r.m0[gm]\}] / [ngspice::get_node \{i(@m.xmn_load_r.m0[id])\}]]]"
descr="gm/ID="}
C {devices/ngspice_get_value.sym} 2250 -2240 0 0 {name=r23 node=v(@m.xmn_load_r.m0[vdsat])
descr="vdsat="}
C {devices/ngspice_get_value.sym} 2250 -2210 0 0 {name=r24 node=v(@m.xmn_load_r.m0[vds])
descr="vds="}
C {devices/ngspice_get_value.sym} 2310 -2270 0 0 {name=r25 node=i(@m.xmn_load_r.m0[id])
descr="id="}
C {devices/ngspice_get_value.sym} 2310 -2240 0 0 {name=r26 node=@m.xmn_load_r.m0[gm]
descr="gm="}
C {devices/ngspice_get_expr.sym} 1590 -2280 0 0 {name=r27 
node="[format %.4g [expr [ngspice::get_node \{@m.xmn_load_l.m0[gm]\}] / [ngspice::get_node \{i(@m.xmn_load_l.m0[id])\}]]]"
descr="gm/ID="}
C {devices/ngspice_get_value.sym} 1590 -2250 0 0 {name=r28 node=v(@m.xmn_load_l.m0[vdsat])
descr="vdsat="}
C {devices/ngspice_get_value.sym} 1590 -2220 0 0 {name=r29 node=v(@m.xmn_load_l.m0[vds])
descr="vds="}
C {devices/ngspice_get_value.sym} 1650 -2280 0 0 {name=r30 node=i(@m.xmn_load_l.m0[id])
descr="id="}
C {devices/ngspice_get_value.sym} 1650 -2250 0 0 {name=r31 node=@m.xmn_load_l.m0[gm]
descr="gm="}
C {devices/ngspice_get_expr.sym} 2040 -2570 0 0 {name=r37 
node="[format %.4g [expr [ngspice::get_node \{@m.xmp_diff_r.m0[gm]\}] / [ngspice::get_node \{i(@m.xmp_diff_r.m0[id])\}]]]"
descr="gm/ID="}
C {devices/ngspice_get_value.sym} 2040 -2540 0 0 {name=r38 node=v(@m.xmp_diff_r.m0[vdsat])
descr="vdsat="}
C {devices/ngspice_get_value.sym} 2040 -2510 0 0 {name=r39 node=v(@m.xmp_diff_r.m0[vds])
descr="vds="}
C {devices/ngspice_get_value.sym} 2100 -2570 0 0 {name=r40 node=i(@m.xmp_diff_r.m0[id])
descr="id="}
C {devices/ngspice_get_value.sym} 2100 -2540 0 0 {name=r41 node=@m.xmp_diff_r.m0[gm]
descr="gm="}
C {devices/ngspice_get_expr.sym} 1750 -2570 0 0 {name=r42 
node="[format %.4g [expr [ngspice::get_node \{@m.xmp_diff_l.m0[gm]\}] / [ngspice::get_node \{i(@m.xmp_diff_l.m0[id])\}]]]"
descr="gm/ID="}
C {devices/ngspice_get_value.sym} 1750 -2540 0 0 {name=r43 node=v(@m.xmp_diff_l.m0[vdsat])
descr="vdsat="}
C {devices/ngspice_get_value.sym} 1750 -2510 0 0 {name=r44 node=v(@m.xmp_diff_l.m0[vds])
descr="vds="}
C {devices/ngspice_get_value.sym} 1810 -2570 0 0 {name=r45 node=i(@m.xmp_diff_l.m0[id])
descr="id="}
C {devices/ngspice_get_value.sym} 1810 -2540 0 0 {name=r46 node=@m.xmp_diff_l.m0[gm]
descr="gm="}
C {devices/ngspice_get_expr.sym} 1810 -2930 0 0 {name=r32 
node="[format %.4g [expr [ngspice::get_node \{@m.xmp_tail.m0[gm]\}] / [ngspice::get_node \{i(@m.xmp_tail.m0[id])\}]]]"
descr="gm/ID="}
C {devices/ngspice_get_value.sym} 1870 -2930 0 0 {name=r35 node=i(@m.xmp_tail.m0[id])
descr="id="}
C {devices/ngspice_get_expr.sym} 1110 -3030 0 0 {name=r47 
node="[format %.4g [expr [ngspice::get_node \{@m.xmp_mirror.m0[gm]\}] / [ngspice::get_node \{i(@m.xmp_mirror.m0[id])\}]]]"
descr="gm/ID="}
C {devices/ngspice_get_value.sym} 1110 -3000 0 0 {name=r48 node=v(@m.xmp_mirror.m0[vdsat])
descr="vdsat="}
C {devices/ngspice_get_value.sym} 1110 -2970 0 0 {name=r49 node=v(@m.xmp_mirror.m0[vds])
descr="vds="}
C {devices/ngspice_get_value.sym} 1170 -3030 0 0 {name=r50 node=i(@m.xmp_mirror.m0[id])
descr="id="}
C {devices/ngspice_get_value.sym} 1170 -3000 0 0 {name=r51 node=@m.xmp_mirror.m0[gm]
descr="gm="}
C {devices/code_shown.sym} 190 -3280 0 0 {name=COMMANDS1 only_toplevel=false
value="
.save @m.xmp_mirror.m0[gds] 
.save @m.xmp_mirror.m0[gm] 
.save @m.xmp_mirror.m0[id]
.save @m.xmp_mirror.m0[vth]
.save @m.xmp_mirror.m0[vdsat]
.save @m.xmp_mirror.m0[vds]


.save @m.xmp_tail.m0[gds] 
.save @m.xmp_tail.m0[gm] 
.save @m.xmp_tail.m0[id]
.save @m.xmp_tail.m0[vth]
.save @m.xmp_tail.m0[vdsat]
.save @m.xmp_tail.m0[vds]

.save @m.xmp_diff_l.m0[gds] 
.save @m.xmp_diff_l.m0[gm] 
.save @m.xmp_diff_l.m0[id]
.save @m.xmp_diff_l.m0[vth]
.save @m.xmp_diff_l.m0[vdsat]
.save @m.xmp_diff_l.m0[vds]

.save @m.xmp_diff_r.m0[gds] 
.save @m.xmp_diff_r.m0[gm] 
.save @m.xmp_diff_r.m0[id]
.save @m.xmp_diff_r.m0[vth]
.save @m.xmp_diff_r.m0[vdsat]
.save @m.xmp_diff_r.m0[vds]

.save @m.xmn_load_l.m0[gds] 
.save @m.xmn_load_l.m0[gm] 
.save @m.xmn_load_l.m0[id]
.save @m.xmn_load_l.m0[vth]
.save @m.xmn_load_l.m0[vdsat]
.save @m.xmn_load_l.m0[vds]

.save @m.xmn_load_r.m0[gds] 
.save @m.xmn_load_r.m0[gm] 
.save @m.xmn_load_r.m0[id]
.save @m.xmn_load_r.m0[vth]
.save @m.xmn_load_r.m0[vdsat]
.save @m.xmn_load_r.m0[vds]

.save @m.xmp_cs_load.m0[gds] 
.save @m.xmp_cs_load.m0[gm] 
.save @m.xmp_cs_load.m0[id]
.save @m.xmp_cs_load.m0[vth]
.save @m.xmp_cs_load.m0[vdsat]
.save @m.xmp_cs_load.m0[vds]

.save @m.xmn_cs.m0[gds] 
.save @m.xmn_cs.m0[gm] 
.save @m.xmn_cs.m0[id]
.save @m.xmn_cs.m0[vth]
.save @m.xmn_cs.m0[vdsat]
.save @m.xmn_cs.m0[vds]

.save @m.xmn_cd_load.m0[gds] 
.save @m.xmn_cd_load.m0[gm] 
.save @m.xmn_cd_load.m0[id]
.save @m.xmn_cd_load.m0[vth]
.save @m.xmn_cd_load.m0[vdsat]
.save @m.xmn_cd_load.m0[vds]

.save @m.xmn_cd.m0[gds] 
.save @m.xmn_cd.m0[gm] 
.save @m.xmn_cd.m0[id]
.save @m.xmn_cd.m0[vth]
.save @m.xmn_cd.m0[vdsat]
.save @m.xmn_cd.m0[vds]


"}
C {devices/code_shown.sym} 500 -1770 0 0 {name=NGSPICE only_toplevel=true
value="

.control
save all


** Simulation
op
ac dec 1001 1 1G
**remzerovec

**set appendwrite

* Middlebrook's Method
let tv=-v(out)/v(in_n)
let ti=-i(vir1)/i(vif1)
let tmb=(tv*ti - 1)/(tv + ti + 2)

plot db(tmb) ylabel 'Magnitude - Middlebrook'
plot 180/pi*cphase(tmb) ylabel 'Phase - Middlebrook'

setplot op1
print @m.xmp_mirror.m0[id]
print cs
print cd
print out

print @m.xmn_cs.m0[vdsat]
print @m.xmn_cs.m0[vds]

print @m.xmp_cs_load.m0[vdsat]
print @m.xmp_cs_load.m0[vds]

print @m.xmn_cd.m0[vdsat]
print @m.xmn_cd.m0[vds]

print @m.xmn_cd_load.m0[vdsat]
print @m.xmn_cd_load.m0[vds]



print @m.xmn_cd_load.m0[vdsat]
print @m.xmn_cd_load.m0[vds]

print @m.xmp_diff_l1.m0[vdsat]
print @m.xmp_diff_l1.m0[vds]

print @m.xmp_diff_r1.m0[vdsat]
print @m.xmp_diff_r1.m0[vds]

print @m.xmn_load_l1.m0[vdsat]
print @m.xmn_load_l1.m0[vds]

print @m.xmn_load_r1.m0[vdsat]
print @m.xmn_load_r1.m0[vds]


print @m.xmp_tail1.m0[vdsat]
print @m.xmp_tail1.m0[vds]

** Plots

**setplot new
**set curplottitle=Loopgain
**let frequency = ac1.frequency
**let T = (ac1.i(V6) + ac2.i(V4))/(ac1.i(V4) + ac2.i(V6))
**let Tmag = db(T)
**let Tphase = 180*cph(T)/pi
**plot Tmag Tphase xlog

write TIA_TB_stb.raw
.endc
"}
C {lab_pin.sym} 1910 -3490 3 1 {name=p1 sig_type=std_logic lab=vss}
C {lab_wire.sym} 1680 -3350 1 0 {name=p13 sig_type=std_logic lab=vss
}
C {lab_wire.sym} 1680 -3570 3 0 {name=p14 sig_type=std_logic lab=in_p
}
C {vsource.sym} 1680 -3420 0 0 {name=V5 value="1.2" savecurrent=false}
C {devices/code_shown.sym} 610 -1970 0 0 {name=MODELS only_toplevel=true
format="tcleval( @value )"
value="
.include $::180MCU_MODELS/design.ngspice
.lib $::180MCU_MODELS/sm141064.ngspice typical
.lib $::180MCU_MODELS/sm141064.ngspice res_typical
.lib $::180MCU_MODELS/sm141064.ngspice mimcap_typical
.lib $::180MCU_MODELS/sm141064.ngspice cap_mim
"}
C {launcher.sym} 1330 -2600 0 0 {name=h1
descr="Annotate OP"
tclcommand= "set show_hidden_texts 1; xschem annotate_op"}
C {devices/ngspice_get_value.sym} 1810 -2890 0 0 {name=r33 node=v(@m.xmp_tail.m0[vdsat])
descr="vdsat="}
C {devices/ngspice_get_value.sym} 1810 -2860 0 0 {name=r34 node=v(@m.xmp_tail.m0[vds])
descr="vds="}
C {devices/ngspice_get_value.sym} 1870 -2890 0 0 {name=r36 node=@m.xmp_tail.m0[gm]
descr="gm="}
C {lab_pin.sym} 1950 -2630 2 1 {name=p8 sig_type=std_logic lab=vdd}
C {ipin.sym} 1290 -3500 0 0 {name=p15 lab=in_p}
C {lab_pin.sym} 1350 -3500 0 1 {name=p16 sig_type=std_logic lab=in_p
}
C {ipin.sym} 1290 -3440 0 0 {name=p19 lab=vdd}
C {lab_pin.sym} 1350 -3440 0 1 {name=p20 sig_type=std_logic lab=vdd
}
C {ipin.sym} 1290 -3410 0 0 {name=p21 lab=vss}
C {lab_pin.sym} 1350 -3410 0 1 {name=p22 sig_type=std_logic lab=vss
}
C {isource.sym} 1990 -3420 0 0 {name=I1 value=20u}
C {gnd.sym} 1990 -3350 0 0 {name=l2 lab=GND}
C {lab_pin.sym} 1990 -3490 3 1 {name=p25 sig_type=std_logic lab=i_ref}
C {ipin.sym} 1290 -3380 0 0 {name=p28 lab=i_ref}
C {lab_pin.sym} 1350 -3380 0 1 {name=p29 sig_type=std_logic lab=i_ref
}
C {lab_pin.sym} 1270 -2830 1 1 {name=p30 sig_type=std_logic lab=i_ref
}
C {opin.sym} 3180 -2520 0 0 {name=p11 lab=out}
C {lab_pin.sym} 2300 -2460 2 1 {name=p23 sig_type=std_logic lab=cs}
C {lab_pin.sym} 2750 -2660 2 1 {name=p24 sig_type=std_logic lab=cd}
C {capa.sym} 3380 -2380 0 0 {name=C2
m=1
value=4p
footprint=1206
device="ceramic capacitor"}
C {symbols/pfet_03v3.sym} 2030 -1510 0 0 {name=MP_TAIL1
L=2u
W=15u
nf=3
m=8
ad="'int((nf+1)/2) * W/nf * 0.18u'"
pd="'2*int((nf+1)/2) * (W/nf + 0.18u)'"
as="'int((nf+2)/2) * W/nf * 0.18u'"
ps="'2*int((nf+2)/2) * (W/nf + 0.18u)'"
nrd="'0.18u / W'" nrs="'0.18u / W'"
sa=0 sb=0 sd=0
model=pfet_03v3
spiceprefix=X
}
C {symbols/pfet_03v3.sym} 1830 -1170 0 0 {name=MP_DIFF_L1
L=2u
W=10u
nf=2
m=10
ad="'int((nf+1)/2) * W/nf * 0.18u'"
pd="'2*int((nf+1)/2) * (W/nf + 0.18u)'"
as="'int((nf+2)/2) * W/nf * 0.18u'"
ps="'2*int((nf+2)/2) * (W/nf + 0.18u)'"
nrd="'0.18u / W'" nrs="'0.18u / W'"
sa=0 sb=0 sd=0
model=pfet_03v3
spiceprefix=X
}
C {symbols/pfet_03v3.sym} 2280 -1170 0 1 {name=MP_DIFF_R1
L=2u
W=10u
nf=2
m=10
ad="'int((nf+1)/2) * W/nf * 0.18u'"
pd="'2*int((nf+1)/2) * (W/nf + 0.18u)'"
as="'int((nf+2)/2) * W/nf * 0.18u'"
ps="'2*int((nf+2)/2) * (W/nf + 0.18u)'"
nrd="'0.18u / W'" nrs="'0.18u / W'"
sa=0 sb=0 sd=0
model=pfet_03v3
spiceprefix=X
}
C {symbols/pfet_03v3.sym} 2750 -1510 0 0 {name=MP_CS_LOAD1
L=2u
W=15u
nf=3
m=25
ad="'int((nf+1)/2) * W/nf * 0.18u'"
pd="'2*int((nf+1)/2) * (W/nf + 0.18u)'"
as="'int((nf+2)/2) * W/nf * 0.18u'"
ps="'2*int((nf+2)/2) * (W/nf + 0.18u)'"
nrd="'0.18u / W'" nrs="'0.18u / W'"
sa=0 sb=0 sd=0
model=pfet_03v3
spiceprefix=X
}
C {symbols/pfet_03v3.sym} 1400 -1510 0 1 {name=MP_MIRROR1
L=2u
W=15u
nf=3
m=1
ad="'int((nf+1)/2) * W/nf * 0.18u'"
pd="'2*int((nf+1)/2) * (W/nf + 0.18u)'"
as="'int((nf+2)/2) * W/nf * 0.18u'"
ps="'2*int((nf+2)/2) * (W/nf + 0.18u)'"
nrd="'0.18u / W'" nrs="'0.18u / W'"
sa=0 sb=0 sd=0
model=pfet_03v3
spiceprefix=X
}
C {symbols/nfet_03v3.sym} 2240 -860 0 0 {name=MN_LOAD_R1
L=2u
W=12u
nf=1
m=1
ad="'int((nf+1)/2) * W/nf * 0.18u'"
pd="'2*int((nf+1)/2) * (W/nf + 0.18u)'"
as="'int((nf+2)/2) * W/nf * 0.18u'"
ps="'2*int((nf+2)/2) * (W/nf + 0.18u)'"
nrd="'0.18u / W'" nrs="'0.18u / W'"
sa=0 sb=0 sd=0
model=nfet_03v3
spiceprefix=X
}
C {symbols/nfet_03v3.sym} 1870 -860 0 1 {name=MN_LOAD_L1
L=2u
W=12u
nf=1
m=1
ad="'int((nf+1)/2) * W/nf * 0.18u'"
pd="'2*int((nf+1)/2) * (W/nf + 0.18u)'"
as="'int((nf+2)/2) * W/nf * 0.18u'"
ps="'2*int((nf+2)/2) * (W/nf + 0.18u)'"
nrd="'0.18u / W'" nrs="'0.18u / W'"
sa=0 sb=0 sd=0
model=nfet_03v3
spiceprefix=X
}
C {symbols/nfet_03v3.sym} 2750 -1000 0 0 {name=MN_CS1
L=2u
W=20u
nf=10
m=11
ad="'int((nf+1)/2) * W/nf * 0.18u'"
pd="'2*int((nf+1)/2) * (W/nf + 0.18u)'"
as="'int((nf+2)/2) * W/nf * 0.18u'"
ps="'2*int((nf+2)/2) * (W/nf + 0.18u)'"
nrd="'0.18u / W'" nrs="'0.18u / W'"
sa=0 sb=0 sd=0
model=nfet_03v3
spiceprefix=X
}
C {symbols/nfet_03v3.sym} 3190 -1200 0 0 {name=MN_CD1
L=2u
W=10u
nf=10
m=26
ad="'int((nf+1)/2) * W/nf * 0.18u'"
pd="'2*int((nf+1)/2) * (W/nf + 0.18u)'"
as="'int((nf+2)/2) * W/nf * 0.18u'"
ps="'2*int((nf+2)/2) * (W/nf + 0.18u)'"
nrd="'0.18u / W'" nrs="'0.18u / W'"
sa=0 sb=0 sd=0
model=nfet_03v3
spiceprefix=X
}
C {symbols/nfet_03v3.sym} 3190 -860 0 0 {name=MN_CD_LOAD1
L=2u
W=12u
nf=1
m=8
ad="'int((nf+1)/2) * W/nf * 0.18u'"
pd="'2*int((nf+1)/2) * (W/nf + 0.18u)'"
as="'int((nf+2)/2) * W/nf * 0.18u'"
ps="'2*int((nf+2)/2) * (W/nf + 0.18u)'"
nrd="'0.18u / W'" nrs="'0.18u / W'"
sa=0 sb=0 sd=0
model=nfet_03v3
spiceprefix=X
}
C {lab_pin.sym} 2040 -1640 3 1 {name=p26 sig_type=std_logic lab=vdd}
C {lab_pin.sym} 2100 -720 1 1 {name=p27 sig_type=std_logic lab=vss}
C {lab_pin.sym} 3230 -1200 0 1 {name=p31 sig_type=std_logic lab=vss}
C {lab_pin.sym} 2390 -1170 0 1 {name=p33 sig_type=std_logic lab=in_p}
C {devices/ngspice_get_expr.sym} 2900 -1540 0 0 {name=r53 
node="[format %.4g [expr [ngspice::get_node \{@m.xmp_cs_load.m0[gm]\}] / [ngspice::get_node \{i(@m.xmp_cs_load.m0[id])\}]]]"
descr="gm/ID="}
C {devices/ngspice_get_value.sym} 2900 -1510 0 0 {name=r54 node=v(@m.xmp_cs_load.m0[vdsat])
descr="vdsat="}
C {devices/ngspice_get_value.sym} 2900 -1480 0 0 {name=r55 node=v(@m.xmp_cs_load.m0[vds])
descr="vds="}
C {devices/ngspice_get_value.sym} 2960 -1540 0 0 {name=r56 node=i(@m.xmp_cs_load.m0[id])
descr="id="}
C {devices/ngspice_get_value.sym} 2960 -1510 0 0 {name=r57 node=@m.xmp_cs_load.m0[gm]
descr="gm="}
C {devices/ngspice_get_expr.sym} 3330 -1220 0 0 {name=r58 
node="[format %.4g [expr [ngspice::get_node \{@m.xmn_cd.m0[gm]\}] / [ngspice::get_node \{i(@m.xmn_cd.m0[id])\}]]]"
descr="gm/ID="}
C {devices/ngspice_get_value.sym} 3330 -1190 0 0 {name=r59 node=v(@m.xmn_cd.m0[vdsat])
descr="vdsat="}
C {devices/ngspice_get_value.sym} 3330 -1160 0 0 {name=r60 node=v(@m.xmn_cd.m0[vds])
descr="vds="}
C {devices/ngspice_get_value.sym} 3390 -1220 0 0 {name=r61 node=i(@m.xmn_cd.m0[id])
descr="id="}
C {devices/ngspice_get_value.sym} 3390 -1190 0 0 {name=r62 node=@m.xmn_cd.m0[gm]
descr="gm="}
C {devices/ngspice_get_expr.sym} 3330 -870 0 0 {name=r63 
node="[format %.4g [expr [ngspice::get_node \{@m.xmn_cd_load.m0[gm]\}] / [ngspice::get_node \{i(@m.xmn_cd_load.m0[id])\}]]]"
descr="gm/ID="}
C {devices/ngspice_get_value.sym} 3330 -840 0 0 {name=r64 node=v(@m.xmn_cd_load.m0[vdsat])
descr="vdsat="}
C {devices/ngspice_get_value.sym} 3330 -810 0 0 {name=r65 node=v(@m.xmn_cd_load.m0[vds])
descr="vds="}
C {devices/ngspice_get_value.sym} 3390 -870 0 0 {name=r66 node=i(@m.xmn_cd_load.m0[id])
descr="id="}
C {devices/ngspice_get_value.sym} 3390 -840 0 0 {name=r67 node=@m.xmn_cd_load.m0[gm]
descr="gm="}
C {devices/ngspice_get_expr.sym} 2880 -1000 0 0 {name=r68 
node="[format %.4g [expr [ngspice::get_node \{@m.xmn_cs.m0[gm]\}] / [ngspice::get_node \{i(@m.xmn_cs.m0[id])\}]]]"
descr="gm/ID="}
C {devices/ngspice_get_value.sym} 2880 -970 0 0 {name=r69 node=v(@m.xmn_cs.m0[vdsat])
descr="vdsat="}
C {devices/ngspice_get_value.sym} 2880 -940 0 0 {name=r70 node=v(@m.xmn_cs.m0[vds])
descr="vds="}
C {devices/ngspice_get_value.sym} 2940 -1000 0 0 {name=r71 node=i(@m.xmn_cs.m0[id])
descr="id="}
C {devices/ngspice_get_value.sym} 2940 -970 0 0 {name=r72 node=@m.xmn_cs.m0[gm]
descr="gm="}
C {devices/ngspice_get_expr.sym} 2360 -810 0 0 {name=r73 
node="[format %.4g [expr [ngspice::get_node \{@m.xmn_load_r.m0[gm]\}] / [ngspice::get_node \{i(@m.xmn_load_r.m0[id])\}]]]"
descr="gm/ID="}
C {devices/ngspice_get_value.sym} 2360 -780 0 0 {name=r74 node=v(@m.xmn_load_r.m0[vdsat])
descr="vdsat="}
C {devices/ngspice_get_value.sym} 2360 -750 0 0 {name=r75 node=v(@m.xmn_load_r.m0[vds])
descr="vds="}
C {devices/ngspice_get_value.sym} 2420 -810 0 0 {name=r76 node=i(@m.xmn_load_r.m0[id])
descr="id="}
C {devices/ngspice_get_value.sym} 2420 -780 0 0 {name=r77 node=@m.xmn_load_r.m0[gm]
descr="gm="}
C {devices/ngspice_get_expr.sym} 1700 -820 0 0 {name=r78 
node="[format %.4g [expr [ngspice::get_node \{@m.xmn_load_l.m0[gm]\}] / [ngspice::get_node \{i(@m.xmn_load_l.m0[id])\}]]]"
descr="gm/ID="}
C {devices/ngspice_get_value.sym} 1700 -790 0 0 {name=r79 node=v(@m.xmn_load_l.m0[vdsat])
descr="vdsat="}
C {devices/ngspice_get_value.sym} 1700 -760 0 0 {name=r80 node=v(@m.xmn_load_l.m0[vds])
descr="vds="}
C {devices/ngspice_get_value.sym} 1760 -820 0 0 {name=r81 node=i(@m.xmn_load_l.m0[id])
descr="id="}
C {devices/ngspice_get_value.sym} 1760 -790 0 0 {name=r82 node=@m.xmn_load_l.m0[gm]
descr="gm="}
C {devices/ngspice_get_expr.sym} 2150 -1110 0 0 {name=r83 
node="[format %.4g [expr [ngspice::get_node \{@m.xmp_diff_r.m0[gm]\}] / [ngspice::get_node \{i(@m.xmp_diff_r.m0[id])\}]]]"
descr="gm/ID="}
C {devices/ngspice_get_value.sym} 2150 -1080 0 0 {name=r84 node=v(@m.xmp_diff_r.m0[vdsat])
descr="vdsat="}
C {devices/ngspice_get_value.sym} 2150 -1050 0 0 {name=r85 node=v(@m.xmp_diff_r.m0[vds])
descr="vds="}
C {devices/ngspice_get_value.sym} 2210 -1110 0 0 {name=r86 node=i(@m.xmp_diff_r.m0[id])
descr="id="}
C {devices/ngspice_get_value.sym} 2210 -1080 0 0 {name=r87 node=@m.xmp_diff_r.m0[gm]
descr="gm="}
C {devices/ngspice_get_expr.sym} 1860 -1110 0 0 {name=r88 
node="[format %.4g [expr [ngspice::get_node \{@m.xmp_diff_l.m0[gm]\}] / [ngspice::get_node \{i(@m.xmp_diff_l.m0[id])\}]]]"
descr="gm/ID="}
C {devices/ngspice_get_value.sym} 1860 -1080 0 0 {name=r89 node=v(@m.xmp_diff_l.m0[vdsat])
descr="vdsat="}
C {devices/ngspice_get_value.sym} 1860 -1050 0 0 {name=r90 node=v(@m.xmp_diff_l.m0[vds])
descr="vds="}
C {devices/ngspice_get_value.sym} 1920 -1110 0 0 {name=r91 node=i(@m.xmp_diff_l.m0[id])
descr="id="}
C {devices/ngspice_get_value.sym} 1920 -1080 0 0 {name=r92 node=@m.xmp_diff_l.m0[gm]
descr="gm="}
C {devices/ngspice_get_expr.sym} 1920 -1470 0 0 {name=r93 
node="[format %.4g [expr [ngspice::get_node \{@m.xmp_tail.m0[gm]\}] / [ngspice::get_node \{i(@m.xmp_tail.m0[id])\}]]]"
descr="gm/ID="}
C {devices/ngspice_get_value.sym} 1980 -1470 0 0 {name=r94 node=i(@m.xmp_tail.m0[id])
descr="id="}
C {devices/ngspice_get_expr.sym} 1220 -1570 0 0 {name=r95 
node="[format %.4g [expr [ngspice::get_node \{@m.xmp_mirror.m0[gm]\}] / [ngspice::get_node \{i(@m.xmp_mirror.m0[id])\}]]]"
descr="gm/ID="}
C {devices/ngspice_get_value.sym} 1220 -1540 0 0 {name=r96 node=v(@m.xmp_mirror.m0[vdsat])
descr="vdsat="}
C {devices/ngspice_get_value.sym} 1220 -1510 0 0 {name=r97 node=v(@m.xmp_mirror.m0[vds])
descr="vds="}
C {devices/ngspice_get_value.sym} 1280 -1570 0 0 {name=r98 node=i(@m.xmp_mirror.m0[id])
descr="id="}
C {devices/ngspice_get_value.sym} 1280 -1540 0 0 {name=r99 node=@m.xmp_mirror.m0[gm]
descr="gm="}
C {devices/ngspice_get_value.sym} 1920 -1430 0 0 {name=r100 node=v(@m.xmp_tail.m0[vdsat])
descr="vdsat="}
C {devices/ngspice_get_value.sym} 1920 -1400 0 0 {name=r101 node=v(@m.xmp_tail.m0[vds])
descr="vds="}
C {devices/ngspice_get_value.sym} 1980 -1430 0 0 {name=r102 node=@m.xmp_tail.m0[gm]
descr="gm="}
C {lab_pin.sym} 2060 -1170 2 1 {name=p34 sig_type=std_logic lab=vdd}
C {lab_pin.sym} 1380 -1370 1 1 {name=p35 sig_type=std_logic lab=i_ref_stb
}
C {opin.sym} 3290 -1060 0 0 {name=p36 lab=out_stb}
C {capa.sym} 3490 -920 0 0 {name=C4
m=1
value=4p
footprint=1206
device="ceramic capacitor"}
C {isource.sym} 1700 -1840 0 0 {name=I2 value=20u}
C {gnd.sym} 1700 -1770 0 0 {name=l3 lab=GND}
C {lab_pin.sym} 1700 -1910 3 1 {name=p37 sig_type=std_logic lab=i_ref_stb}
C {devices/vsource.sym} 2470 -2060 3 0 {name=Vtest1 value="dc 0 ac 1"}
C {devices/ammeter.sym} 2390 -580 1 0 {name=Vir1 savecurrent=true spice_ignore=0}
C {devices/ammeter.sym} 2290 -580 1 0 {name=Vif1 savecurrent=true spice_ignore=0}
C {devices/isource.sym} 2340 -470 2 0 {name=Itest1 value="dc 0 ac 1"}
C {lab_pin.sym} 2340 -380 1 1 {name=p3 sig_type=std_logic lab=vss}
C {lab_pin.sym} 1510 -2630 2 1 {name=p9 sig_type=std_logic lab=in_n}
C {lab_pin.sym} 2500 -2590 3 1 {name=p12 sig_type=std_logic lab=vdd}
C {symbols/ppolyf_u_1k.sym} 2500 -2530 1 0 {name=R105
W=20e-6
L=10e-6
model=ppolyf_u_1k
spiceprefix=X
m=1}
C {symbols/cap_mim_2f0fF.sym} 2590 -2530 3 0 {name=C5
W=10e-6
L=10e-6
model=cap_mim_2f0fF
spiceprefix=X
m=15}
C {lab_pin.sym} 2610 -1130 3 1 {name=p17 sig_type=std_logic lab=vdd}
C {symbols/ppolyf_u_1k.sym} 2610 -1070 1 0 {name=R106
W=20e-6
L=10e-6
model=ppolyf_u_1k
spiceprefix=X
m=1}
C {symbols/cap_mim_2f0fF.sym} 2700 -1070 3 0 {name=C6
W=10e-6
L=10e-6
model=cap_mim_2f0fF
spiceprefix=X
m=15}
C {lab_pin.sym} 2710 -640 3 1 {name=p18 sig_type=std_logic lab=vdd}
C {symbols/ppolyf_u_1k.sym} 2710 -580 1 0 {name=R107
W=10e-6
L=10e-6
model=ppolyf_u_1k
spiceprefix=X
m=1}
C {lab_pin.sym} 2760 -2120 3 1 {name=p32 sig_type=std_logic lab=vdd}
C {symbols/ppolyf_u_1k.sym} 2760 -2060 1 0 {name=R52
W=10e-6
L=10e-6
model=ppolyf_u_1k
spiceprefix=X
m=1}
